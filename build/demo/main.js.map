{"version":3,"file":null,"sources":["../../src/demo/Animation.js","../../src/demo/Canvas2d.js","../../src/demo/Utils.js","../../src/demo/components/Path.vue","../../src/demo/App.vue","../../src/demo/main.js"],"sourcesContent":["const Animation = function () {\n    this.id = null;\n    this.count = 0;\n    this.running = false;\n    this.interval = -1;\n    this.last = new Date().getTime();\n    this.callbacks = [];\n};\n\n// register callback\nAnimation.prototype.fps = function (fps) {\n    this.interval = (fps < 0) ? -1 : 1000 / fps;\n    return this;\n};\n\n// register callback\nAnimation.prototype.add = function (callback) {\n    this.callbacks.push(callback);\n    return this;\n};\n\n// clear all callbacks\nAnimation.prototype.clear = function () {\n    this.callbacks.splice(0, this.callbacks.length);\n    return this;\n};\n\n// clear all callbacks\nAnimation.prototype.only = function (callback) {\n    this.clear().add(callback);\n    return this;\n};\n\nAnimation.prototype.play = function () {\n    this.running = true;\n\n    const callback = () => {\n        if (!this.running) {\n            return;\n        }\n\n        const now = new Date().getTime();\n        const delta = now - this.last;\n\n        if (this.interval < 0 || delta > this.interval) {\n            this.last = now - (delta % this.interval);\n            this.callbacks.forEach((fn) => {\n                this.count += 1;\n                fn();\n            });\n        }\n\n        this.id = window.requestAnimationFrame(callback);\n    };\n\n    this.id = window.requestAnimationFrame(callback);\n    return this;\n};\n\nAnimation.prototype.stop = function () {\n    this.running = false;\n    this.count = 0;\n    return this;\n};\n\nAnimation.prototype.pause = function () {\n    this.running = false;\n    return this;\n};\n\nAnimation.prototype.reset = function () {\n    this.running = false;\n    return this;\n};\n\nAnimation.prototype.toggle = function () {\n    if (this.running) {\n        this.pause();\n    } else {\n        this.play();\n    }\n    return this;\n};\n\nexport default Animation;\n","const document = window.document;\nconst CLASS_NAME = 'canvas';\n\nconst Canvas2d = function () {\n    const canvas = document.createElement('canvas');\n    canvas.className = CLASS_NAME;\n    const ctx = canvas.getContext('2d');\n\n    this.canvas = canvas;\n    this.ctx = ctx;\n};\n\nCanvas2d.prototype.clear = function () {\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n};\n\nexport default Canvas2d;\n","export default {\n    /**\n    * Returns a random integer between min (inclusive) and max (inclusive)\n    * Using Math.round() will give you a non-uniform distribution!\n    */\n    randInt: function (min, max) {\n        return Math.floor(Math.random() * (max - (min + 1))) + min;\n    },\n\n    /**\n    * Returns a random integer between min (inclusive) and max (inclusive)\n    * Using Math.round() will give you a non-uniform distribution!\n    */\n    bounds: function (val, min, max) {\n        val = (val < min) ? min + 1 : val;\n        val = (val > max) ? max - 1 : val;\n        return val;\n    },\n\n    /**\n    * Returns a random integer between min (inclusive) and max (inclusive)\n    * Using Math.round() will give you a non-uniform distribution!\n    */\n    randIntRange: function (base, range, bounce = []) {\n        if (bounce.length) {\n            if ((base + range[1]) > bounce[1]) {\n                base -= range[1];\n            }\n            if ((base + range[0]) < bounce[0]) {\n                base -= range[0];\n            }\n        }\n\n        return base + this.randInt(range[0], range[1]);\n    }\n};\n","<template>\n    <div>\n        <form class=\"mui-form\">\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segments\" min=\"1\" max=\"500\" step=\"10\">\n                <label>Segments <small>({{ state.segments }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <pre>{{state}}</pre>\n        </form>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\n\nconst Space = window.Space;\nlet prev;\n\nconst state = {\n    prev: null,\n    segments: 100,\n    segmentsRange: 10\n};\n\nconst compute = function(state, canvas) {\n    if (!state.prev) {\n        state.prev = new Space.Point.Cartesian(canvas.width/2, canvas.height/2);\n    }\n    const path = new Space.Path(state.prev.x, state.prev.y);\n    const range = state.segmentsRange;\n    let count = 0;\n    let rand;\n    while(count < state.segments){\n        rand = Utils.randInt(-state.segmentsRange, state.segmentsRange);\n        let x = Utils.bounds(path.last().x + rand, 0, canvas.width);\n        rand = Utils.randInt(-state.segmentsRange, state.segmentsRange);\n        let y = Utils.bounds(path.last().y + rand, 0, canvas.height);\n        // console.log('here', x, y);\n        path.add(x, y);\n        count++;\n    }\n\n    return path;\n};\n\nexport default {\n    name: 'Path',\n    props: [\n        'animation',\n        'states',\n        'canvas'\n    ],\n    mounted() {\n        let path;\n        this.canvas.clear();\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            path = compute(this.state, this.canvas.canvas);\n\n            // draw\n            this.canvas.clear();\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(path.first().x, path.first().y);\n\n            path.points.forEach((point, index)=> {\n                if(index === 0){\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n                this.canvas.ctx.strokeStyle = this.states.canvas.strokeStyle;\n                this.canvas.ctx.lineWidth = this.states.canvas.lineWidth;\n                this.canvas.ctx.stroke();\n            });\n            this.canvas.ctx.closePath();\n\n            state.prev = path.last();\n        })\n        .play()\n        ;\n    },\n    components: {\n    },\n    data() {\n        return {\n            state\n        };\n    }\n};\n\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <header class=\"mui-appbar mui--z1\">\n            <div class=\"mui-container\">\n                <table width=\"100%\">\n                    <tr class=\"mui--appbar-height\">\n                        <td class=\"mui--text-title\">Brand.io</td>\n                        <td align=\"right\">\n                            <ul class=\"mui-list--inline mui--text-body2\">\n                                <li><router-link to=\"/Path\">Path</router-link></li>\n                            </ul>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </header>\n\n        <div id=\"content\" class=\"mui-container-fluid\">\n            <div class=\"mui-row\">\n            \n                <div class=\"mui-col-md-8 app--canvas\">\n                </div>\n\n                <div class=\"mui-col-md-4\">\n                \n                     <form class=\"mui-form\">\n                        <div class=\"mui-textfield\">\n                            <span>count {{animation.count}}</span>\n                        </div>\n                        <div class=\"mui-textfield\">\n                            <button v-on:click=\"animation.toggle()\" class=\"mui-btn mui-btn--small mui-btn--primary\">{{ (animation.running) ? 'Pause' : 'Run' }}</button>\n                        </div>\n                        <div class=\"mui-textfield\">\n                            <input type=\"range\" v-on:change=\"setFps\" min=\"0\" max=\"500\">\n                            <label>fps <small>({{ 1000 / animation.interval }})</small></label>\n                        </div>\n                    </form>\n                        \n                    <router-view class=\"view\"\n                        :states=\"states\"\n                        :animation=\"animation\"\n                        :canvas=\"canvas\"\n                    ></router-view>\n                    \n                <div>\n                \n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Path from './components/Path.vue';\n\nexport default {\n    name: 'app',\n    props: ['animation', 'states', 'canvas'],\n    components: {\n        Path\n    },\n    mounted() {\n        this.$el.querySelector('.app--canvas').appendChild(this.canvas.canvas);\n        this.canvas.canvas.width = this.states.canvas.width;\n        this.canvas.canvas.height = this.states.canvas.height;\n        this.canvas.ctx.fillStyle = this.states.canvas.fillStyle;\n        this.canvas.ctx.lineWidth = this.states.canvas.lineWidth;\n    },\n    methods: {\n        setFps: function (e) {\n            // @TODO: improve this crap algo\n            let fps = parseInt(e.target.value, 10);\n            if (isNaN(fps)) {\n                e.target.classList.add('error');\n                return;\n            }\n            \n            e.target.classList.remove('error');\n            if(fps >= 100){\n                fps = -1;\n            }\n     \n            this.animation.fps(fps);\n        }\n    }\n};\n</script>\n\n<style>\n\n</style>\n","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n// import Space from '../Space';\n\n// rollup-plugin-scss\nimport './main.scss';\n\nimport Animation from './Animation';\nimport Canvas2d from './Canvas2d';\n\nimport Path from './components/Path.vue';\nimport App from './App.vue';\n\nconst animation = new Animation();\nconst canvas = new Canvas2d();\n\nconst states = {\n    canvas: {\n        width: 500,\n        height: 500,\n        strokeStyle: 'hsla(300, 100%, 75%, 1)',\n        fillStyle: 'rgba(0, 0, 0, .08)',\n        lineWidth: 0.1\n    }\n};\n\n// Create the router\nconst router = new VueRouter({\n    mode: 'hash', //'history',\n    routes: [\n        {\n            path: '/',\n            component: Path\n        },\n        {\n            path: '/Path',\n            component: Path\n        },\n        // catch all redirect\n        {\n            path: '*',\n            redirect: '/'\n        }\n    ]\n});\n\n// 4. Create and mount root instance.\n// Make sure to inject the router.\nnew Vue({\n    router,\n    data: {\n        animation,\n        states,\n        canvas\n    },\n    components: {\n        App\n    },\n    //render: h => h(App)\n    template: '<App :states=\"states\" :animation=\"animation\" :canvas=\"canvas\" />',\n}).$mount('#app');\n"],"names":["Animation","id","count","running","interval","last","Date","getTime","callbacks","prototype","fps","add","callback","push","clear","splice","length","only","play","now","delta","forEach","fn","window","requestAnimationFrame","stop","pause","reset","toggle","document","CLASS_NAME","Canvas2d","canvas","createElement","className","ctx","getContext","fillRect","width","height","min","max","Math","floor","random","val","base","range","bounce","randInt","Space","state","compute","prev","Point","Cartesian","path","Path","x","y","segmentsRange","rand","segments","Utils","bounds","render","animation","beginPath","moveTo","first","points","point","index","lineTo","strokeStyle","states","lineWidth","stroke","closePath","$el","querySelector","appendChild","fillStyle","e","parseInt","target","value","isNaN","classList","remove","router","VueRouter","Vue","$mount"],"mappings":"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"}