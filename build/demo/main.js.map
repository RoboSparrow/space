{"version":3,"file":null,"sources":["../../src/demo/Animation.js","../../src/demo/Canvas2d.js","../../src/demo/State.js","../../src/demo/Utils.js","../../src/demo/Home.vue","../../src/demo/Canvas2dHelpers.js","../../src/demo/Form/ColorPicker.vue","../../src/demo/Form/EditPathPoints.vue","../../src/demo/Form/Dev.vue","../../src/demo/Figures/BezierPath.vue","../../src/demo/Figures/Figures.vue","../../src/demo/Paths/Path.vue","../../src/demo/Paths/Polygon.vue","../../src/demo/Paths/Rectangle.vue","../../src/demo/Paths/Star.vue","../../src/demo/Paths/Cog.vue","../../src/demo/BezierPaths/Bezier.vue","../../src/demo/Morphing/Morpher.vue","../../src/demo/Routes.js","../../src/demo/Form/Animation.vue","../../src/demo/App.vue","../../src/demo/main.js"],"sourcesContent":["const Animation = function () {\n    this.id = null;\n    this.count = 0;\n    this.running = false;\n    this.interval = -1;\n    this.last = new Date().getTime();\n    this.callbacks = [];\n};\n\n// throttle - set frames per second\nAnimation.prototype.fps = function (fps) {\n    this.interval = (fps < 0) ? -1 : 1000 / fps;\n    return this;\n};\n\n// register callback\nAnimation.prototype.add = function (callback) {\n    this.callbacks.push(callback);\n    return this;\n};\n\n// clear all callbacks\nAnimation.prototype.clear = function () {\n    this.callbacks.splice(0, this.callbacks.length);\n    return this;\n};\n\n// clear existing callbacks and set one\nAnimation.prototype.only = function (callback) {\n    this.clear().add(callback);\n    return this;\n};\n\nAnimation.prototype.play = function () {\n    this.running = true;\n\n    const callback = () => {\n        if (!this.running) {\n            return;\n        }\n\n        const now = new Date().getTime();\n        const delta = now - this.last;\n\n        if (this.interval < 0 || delta > this.interval) {\n            this.last = now - (delta % this.interval);\n            this.callbacks.forEach((fn) => {\n                this.count += 1;\n                fn();\n            });\n        }\n\n        this.id = window.requestAnimationFrame(callback);\n    };\n\n    this.id = window.requestAnimationFrame(callback);\n    return this;\n};\n\nAnimation.prototype.stop = function () {\n    this.running = false;\n    this.count = 0;\n    return this;\n};\n\nAnimation.prototype.pause = function () {\n    this.running = false;\n    return this;\n};\n\nAnimation.prototype.cancel = function () {\n    this.stop();\n    window.cancelAnimationFrame(this.id);\n    this.id = null;\n    return this;\n};\n\nAnimation.prototype.toggle = function () {\n    if (this.running) {\n        this.pause();\n    } else {\n        this.play();\n    }\n    return this;\n};\n\nexport default Animation;\n","const document = window.document;\nconst CLASS_NAME = 'canvas';\n\nconst Canvas2d = function () {\n    const canvas = document.createElement('canvas');\n    canvas.className = CLASS_NAME;\n    const ctx = canvas.getContext('2d');\n\n    this.canvas = canvas;\n    this.ctx = ctx;\n};\n\nCanvas2d.prototype.styles = function (styles) {\n    Object.keys(styles).forEach((key) => {\n        if (key in this.ctx) {\n            this.ctx[key] = styles[key];\n        }\n    });\n};\n\nCanvas2d.prototype.clear = function () {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n};\n\nCanvas2d.prototype.fill = function () {\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n};\n\nexport default Canvas2d;\n","const State = {\n    canvas: {\n        width: 500,\n        height: 500,\n        strokeStyle: 'hsla(300, 100%, 75%, 1)',\n        fillStyle: 'rgba(0, 0, 0, .08)',\n        lineWidth: 0.1\n    },\n\n    // shallow(!) clone and merge in submitted properties\n    factor: function (property, merge) {\n        merge = merge || {};\n        Object.keys(this[property]).forEach((key) => {\n            merge[key] = (typeof merge[key] !== 'undefined') ? merge[key] : this[property][key];\n        });\n        return merge;\n    }\n\n};\n\nexport default State;\n","export default {\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    randInt: function (min, max) {\n        min = min || -1;\n        max = max || 1;\n        // eslint-disable-next-line no-mixed-operators\n        return Math.random() * (max - min) + min;\n    },\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    bounds: function (val, min, max) {\n        val = (min !== false && val < min) ? min : val;\n        val = (max !== false && val > max) ? max : val;\n        return val;\n    },\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    randIntRange: function (base, range, bounce = []) {\n        if (bounce.length) {\n            if ((base + range[1]) > bounce[1]) {\n                base -= range[1];\n            }\n            if ((base + range[0]) < bounce[0]) {\n                base -= range[0];\n            }\n        }\n\n        return base + this.randInt(range[0], range[1]);\n    },\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    radians: function (deg) {\n        return deg * (Math.PI / 180);\n    }\n\n};\n","<template>\n    <div>\n        nothing\n    </div>\n</template>\n\n<script>\nimport Utils from './Utils';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n\n    let i;\n    let origin;\n    const figures = {};\n\n    // Path\n    const path = new Space.Path(state.origin);\n    const segments = Utils.randInt(10, 100);\n    path.add(origin);\n    for (i = 1; i < segments; i += 1) {\n        const prev = path.points[i - 1];\n        path.add(prev.x + Utils.randInt(-100, 100), prev.y + Utils.randInt(-100, 100));\n    }\n\n    figures.Path = {\n        path: path,\n        fillStyle: [255, 255, 255, 0.05]\n    };\n\n    //\n    // origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    origin = new Space.Point.Cartesian(Utils.randInt(canvas.width / 2, canvas.width), Utils.randInt(canvas.height / 2, canvas.height));\n    const star = new Space.Star(Utils.randInt(3, 15), Utils.randInt(100, 300), Utils.randInt(10, 100), origin);\n\n    figures.star = {\n        path: star.path,\n        fillStyle: [-1, -1, -1, 0.25]\n    };\n\n    // Square\n    origin = new Space.Point.Cartesian(Utils.randInt(50, canvas.width / 2), Utils.randInt(50, canvas.height / 2));\n    const dim = Utils.randInt(50, 75);\n    const square = new Space.Rectangle(dim, dim, origin);\n\n    figures.Square = {\n        path: square.path,\n        fillStyle: [-1, -1, -1, 0.25]\n    };\n\n    state.prev.figures = figures;\n    return figures;\n};\n\nconst randRgba = function (rgba) {\n    const r = (rgba[0] > 0) ? rgba[0] : Math.round(Utils.randInt(0, 255));\n    const g = (rgba[1] > 0) ? rgba[1] : Math.round(Utils.randInt(0, 255));\n    const b = (rgba[2] > 0) ? rgba[2] : Math.round(Utils.randInt(0, 255));\n    const a = (rgba[3] > 0) ? rgba[3] : Math.round(Utils.randInt(0, 1));\n    return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + a + ')';\n};\n\nconst draw = function (figure, ctx) {\n    //init\n    ctx.save();\n\n    // styles\n    ctx.fillStyle = randRgba(figure.fillStyle);\n    ctx.strokeStyle = randRgba(figure.fillStyle);\n    ctx.lineWidth = 1;\n\n    // path\n    const path = figure.path;\n    ctx.beginPath();\n    ctx.moveTo(path.first().x, path.first().y);\n    path.points.forEach((point, index) => {\n        if (index === 0) {\n            return;\n        }\n        ctx.lineTo(point.x, point.y);\n    });\n\n    // draw\n    if (ctx.fillStyle) {\n        ctx.fill();\n    }\n    ctx.stroke();\n\n    // finish\n    ctx.closePath();\n    ctx.restore();\n};\n\nexport default {\n    name: 'Home',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    figures: {}\n                },\n                origin: null,\n                canvas: this.appState.factor('canvas')\n            }\n        };\n    },\n    created() {\n        // temp redirect\n        // this.$router.push('/Path');\n    },\n    mounted() {\n        this.canvas.fill();\n\n        this.animation\n        .fps(32)\n        .only(() => {\n            // compute path\n            const figures = compute(this.state, this.canvas.canvas);\n            const tasks = Object.keys(figures);\n            // init\n            this.canvas.fill();\n\n            // draw\n            tasks.forEach((id) => {\n                draw(figures[id], this.canvas.ctx);\n            });\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","const Helpers = {\n\n    ////\n    // Controls\n    ////\n\n    drawLine: function (ctx, from, to, theme) {\n        if (!from) {\n            return;\n        }\n        ctx.save();\n\n        ctx.fillStyle = theme;\n        ctx.strokeStyle = theme;\n        //ctx.lineWidth = 0.5;\n        ctx.setLineDash([2, 2]);\n\n        ctx.beginPath();\n        ctx.moveTo(from.x, from.y);\n        ctx.lineTo(to.x, to.y);\n        ctx.stroke();\n        ctx.closePath();\n\n        ctx.restore();\n    },\n\n    drawPoint: function (ctx, point, name, theme) {\n        ctx.save();\n\n        ctx.fillStyle = theme;\n        ctx.strokeStyle = theme;\n\n        ctx.fillText(`${name}`, point.x + 10, point.y + 10);\n        ctx.fillRect(point.x - 5, point.y - 5, 10, 10);\n\n        ctx.restore();\n    },\n\n    drawCircle: function (ctx, point, name, theme) {\n        ctx.save();\n\n        ctx.fillStyle = theme;\n\n        ctx.fillText(`${name}`, point.x + 10, point.y + 10);\n        ctx.beginPath();\n        ctx.arc(point.x, point.y, 5, 0, 2 * Math.PI);\n        ctx.fill();\n\n        ctx.closePath();\n        ctx.restore();\n    },\n\n    drawHandle: function (ctx, point, handle, name, theme) {\n        ctx.save();\n\n        ctx.beginPath();\n        ctx.fillStyle = theme;\n        ctx.strokeStyle = theme;\n        ctx.lineWidth = 0.5;\n        ctx.fillText(`${name}`, handle.x + 10, handle.y);\n        ctx.fillRect(handle.x - 5, handle.y - 5, 10, 10);\n        ctx.moveTo(point.x, point.y);\n        ctx.lineTo(handle.x, handle.y);\n        ctx.stroke();\n\n        ctx.closePath();\n        ctx.restore();\n    },\n\n    drawBoundingBox: function (ctx, path, theme) {\n        const bounds = path.bounds();\n        if (!path.bounds()) {\n            return;\n        }\n        ctx.save();\n\n        ctx.fillStyle = theme;\n        ctx.strokeStyle = theme;\n        ctx.lineWidth = 0.2;\n\n        ctx.setLineDash([2, 2]);\n        ctx.strokeRect(bounds.min.x, bounds.min.y, bounds.max.x - bounds.min.x, bounds.max.y - bounds.min.y);\n\n        ctx.beginPath();\n        ctx.moveTo(bounds.center.x, bounds.min.y);\n        ctx.lineTo(bounds.center.x, bounds.max.y);\n        ctx.moveTo(bounds.min.x, bounds.center.y);\n        ctx.lineTo(bounds.max.x, bounds.center.y);\n        ctx.stroke();\n\n        ctx.closePath();\n        ctx.restore();\n    },\n\n    ////\n    // lines\n    ////\n\n    line: function (ctx, prev, point) {\n        if (!prev) {\n            return;\n        }\n        ctx.moveTo(prev.x, prev.y);\n        ctx.lineTo(point.x, point.y);\n    },\n\n    bezierLine: function (ctx, prev, point) {\n        if (!prev) {\n            return;\n        }\n        //ctx.moveTo(prev.x, prev.y);//Dev\n        const prevM = (prev && typeof prev.members !== 'undefined') ? prev.members.length : 0;\n        const pointM = (typeof point.members !== 'undefined') ? point.members.length : 0;\n\n        // line\n        if (!prevM && !pointM) {\n            ctx.lineTo(point.x, point.y);\n            return;\n        }\n        // middle\n        if (prevM > 1 && pointM > 1) {\n            ctx.bezierCurveTo(prev.members[1].x, prev.members[1].y, point.members[0].x, point.members[0].y, point.x, point.y);\n            return;\n        }\n        // start\n        if (!prevM && pointM) {\n            ctx.quadraticCurveTo(point.members[0].x, point.members[0].y, point.x, point.y);\n            return;\n        }\n        // end\n        if (prevM && !pointM) {\n            ctx.quadraticCurveTo(prev.members[1].x, prev.members[1].y, point.x, point.y);\n        }\n    }\n\n};\n\nexport default Helpers;\n","<template>\n    <div class=\"app--color-picker mui-panel\">\n        <table class=\"mui-table\">\n            <tbody>\n                <tr>\n                    <td>\n                        <input type=\"range\" v-model.number=\"RGBA[0]\" min=\"0\" max=\"255\">\n                    </td>\n                    <td>\n                        <strong class=\"app--indicator\" v-bind:style=\"{color:'rgb(' + RGBA[0] + ', 0, 0)'}\">◼</strong>\n                    </td>\n                    <td>\n                        <small>Red({{ RGBA[0] }})</small>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input type=\"range\" v-model.number=\"RGBA[1]\" min=\"0\" max=\"255\">\n                    </td>\n                    <td>\n                        <strong class=\"app--indicator\" v-bind:style=\"{color:'rgb(0, ' + RGBA[1] + ', 0)'}\">◼</strong>\n                    </td>\n                    <td>\n                        <small>Green({{ RGBA[1] }})</small>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input type=\"range\" v-model.number=\"RGBA[2]\" min=\"0\" max=\"255\">\n                    </td>\n                    <td>\n                        <strong class=\"app--indicator\" v-bind:style=\"{color:'rgb(0, 0, ' + RGBA[2] + ')'}\">◼</strong>\n                    </td>\n                    <td>\n                         <small>Blue({{ RGBA[2] }})</small>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                         <input type=\"range\" v-model.number=\"RGBA[3]\" min=\"0\" max=\"1\" step=\"0.1\">\n                    </td>\n                    <td></td>\n                    <td>\n                        <small>Alpha({{ RGBA[3] }})</small>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <pre class=\"app--color\" v-bind:style=\"{backgroundColor: rgbaString, color: rgbaStringContrast}\">{{rgbaString}}</pre>\n\n        <a  class=\"mui-btn mui-btn--small mui-btn--primary\" v-on:click=\"setColor()\">Set color</a>\n    </div>\n</template>\n\n<script>\nconst match = function (str, model) {\n    if (!str || str === 'transparent') {\n        return [0, 0, 0, 1];\n    }\n    let i;\n    let n;\n    const matches = str.match(/\\d+/g);\n    for (i = 0; i < matches.length; i += 1) {\n        n = parseInt(matches[i], 10);\n        if (!isNaN(n)) {\n            model[i] = matches[i];\n        }\n    }\n    return matches;\n};\n\nexport default {\n    name: 'ColorPicker',\n    props: [\n        'rgba',\n        'targ'\n    ],\n    data: function () {\n        return {\n            RGBA: match(this.rgba, [0, 0, 0, 1])\n        };\n    },\n    computed: {\n        rgbaString: function () {\n            return 'rgba(' + this.RGBA.toString() + ')';\n        },\n        rgbaStringContrast: function () {\n            const yiq = ((this.RGBA[0] * 299) + (this.RGBA[1] * 587) + (this.RGBA[2] * 114)) / 1000;\n            return (yiq >= 128) ? 'black' : 'white';\n        }\n    },\n    methods: {\n        setColor: function () {\n            this.$parent.$emit('color-picker:' + this.targ, this.rgbaString);\n        }\n    },\n};\n</script>\n\n<style>\n    .app--color-picker pre {\n        text-align: center;\n        border: 1px solid white;\n        padding: 10px;\n        font-size: 10px;\n    }\n</style>\n","<template>\n    <div>\n        <div class=\"app--micro-form\" v-if=\"path && path.points !== 'undefined'\">\n            <section  v-for=\"(point, index) in path.points\">\n                <strong>Point {{index}}</strong>\n                <div>\n                    <input type=\"text\" v-model.number=\"point.x\" v-on:change=\"update()\" size=\"3\">\n                    <label>x</label>\n                    <input type=\"text\" v-model.number=\"point.y\" v-on:change=\"update()\" size=\"3\">\n                    <label>y</label>\n                </div>\n                <!-- groups -->\n                <div\n                    v-if=\"typeof point.members !== 'undefined' && point.members.length\"\n                    v-for=\"(member, i) in point.members\">\n                    <strong>cp[{{i}}]</strong><br>\n                    <input type=\"text\" v-model.number=\"member.x\" v-on:change=\"update()\" size=\"3\">\n                    <label>x</label>\n                    <input type=\"text\" v-model.number=\"member.y\" v-on:change=\"update()\" size=\"3\">\n                    <label>.y</label>\n                </div>\n                <br>\n            </section>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'EditPathPoints',\n    props: [\n        'path'\n    ],\n    methods: {\n        update: function () {\n            this.$parent.$emit('edit-path-points:updated');\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <section class=\"mui-form\">\n        <div class=\"mui-checkbox\">\n            <label>\n                <input type=\"checkbox\" v-model=\"show\"> Show {{label}}\n            </label>\n        </div>\n        <pre v-if=\"show\">{{data}}</pre>\n    </section>\n</template>\n\n<script>\nexport default {\n    name: 'Dev',\n    props: ['data', 'label'],\n    data: function () {\n        return {\n            show: false\n        };\n    },\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <!-- nav -->\n        <section>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('circle')\" v-bind:class=\"{active: state.figure == 'circle'}\">Circle</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('free')\"   v-bind:class=\"{active: state.figure == 'free'}\">Open Path</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"(state.figure == 'random') ? init('random') : goTo('random')\" v-bind:class=\"{active: state.figure == 'random'}\">Random</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('star')\" v-bind:class=\"{active: state.figure == 'star'}\">Star</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('flower')\" v-bind:class=\"{active: state.figure == 'flower'}\">Flower</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('seaStar')\" v-bind:class=\"{active: state.figure == 'seaStar'}\">Sea Star</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('triplet')\" v-bind:class=\"{active: state.figure == 'triplet'}\">Triplet</button>\n        </section>\n        <!-- helpers -->\n        <section class=\"mui-form\">\n            <legend>Helpers</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showHandles\" v-on:change=\"init()\"> Handles\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPoints\" v-on:change=\"init()\"> Points\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPath\" v-on:change=\"init()\"> Path\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showBounds\" v-on:change=\"init()\"> Bounding Box\n                </label>\n            </div>\n        </section>\n        <!-- states for figure -->\n        <section class=\"mui-form\">\n            <legend>States</legend>\n\n            <div class=\"mui-textfield\" v-if=\"typeof state[state.figure].tension !== 'undefined'\">\n                <input type=\"range\" v-model.number=\"state[state.figure].tension\" min=\"-2\" max=\"2\" step=\"0.1\" v-on:change=\"init()\">\n                <label>Corner tension <small>({{ state[state.figure].tension }})</small></label>\n            </div>\n\n            <div class=\"mui-textfield\" v-if=\"typeof state[state.figure].segments !== 'undefined'\">\n                <input type=\"range\" v-model.number=\"state[state.figure].segments\" min=\"3\" max=\"20\" v-on:change=\"init()\">\n                <label>Segments <small>({{ state[state.figure].segments }})</small></label>\n            </div>\n\n            <div class=\"mui-textfield\" v-if=\"typeof state[state.figure].outerTension !== 'undefined'\">\n                <input type=\"range\" v-model.number=\"state[state.figure].outerTension\" min=\"0\" max=\"25\" step=\"1\" v-on:change=\"init()\">\n                <label>Outer corner tension <small>({{ state[state.figure].outerTension }})</small></label>\n            </div>\n\n            <div class=\"mui-textfield\" v-if=\"typeof state[state.figure].innerTension !== 'undefined'\">\n                <input type=\"range\" v-model.number=\"state[state.figure].innerTension\" min=\"0\" max=\"5\" step=\"0.1\" v-on:change=\"init()\">\n                <label>Inner corner tension <small>({{ state[state.figure].innerTension }})</small></label>\n            </div>\n        </section>\n        <!-- colors, stroke -->\n        <section class=\"mui-form\">\n            <legend>Appearance</legend>\n\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.stroke.edit\" > Edit Stroke\n                </label>\n            </div>\n\n            <div class=\"mui-panel\" v-if=\"state.stroke.edit\">\n                <div class=\"mui-textfield\">\n                    <input type=\"text\" v-model.number=\"state.canvas.lineWidth\" v-on:change=\"init()\" >\n                    <label>Width</label>\n                </div>\n                <color-picker :targ=\"'strokeStyle'\" :rgba=\"state.canvas.strokeStyle\"></color-picker>\n            </div>\n\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.fill.edit\" > Edit Fill\n                </label>\n            </div>\n\n            <div class=\"mui-panel\" v-if=\"state.fill.edit\">\n                <color-picker :targ=\"'fillStyle'\" :rgba=\"state.canvas.fillStyle\"></color-picker>\n            </div>\n        </section>\n        <!-- edit path points -->\n        <section class=\"mui-form\">\n            <legend>Path</legend>\n\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.path.edit\" > Edit Path\n                </label>\n            </div>\n        </section>\n        <!-- devel -->\n        <section class=\"mui-form\">\n            <legend>Devel</legend>\n            <div class=\"mui-panel\" v-if=\"state.path.edit\">\n                <edit-path-points :path=\"path\"></edit-path-points>\n            </div>\n            <dev :label=\"'State'\" :data=\"state\"></dev>\n        </section>\n    </div>\n</template>\n\n<script>\nimport Canvas2dHelpers from '../Canvas2dHelpers';\nimport Utils from '../Utils';\n\nimport ColorPicker from '../Form/ColorPicker.vue';\nimport EditPathPoints from '../Form/EditPathPoints.vue';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\n//TODO this can be moved into figure paths\nconst compute = function (path, state) {\n    const figure = state.figure;\n    switch (figure) {\n        case 'flower':\n        case 'seaStar':\n            break;\n        default:\n            Space.Bezier.smoothPath(path, state[figure].tension);\n    }\n    return path;\n};\n\nconst draw = function (path, state, canvas) {\n    canvas.ctx.save();\n    canvas.ctx.strokeStyle = state.canvas.strokeStyle;\n    canvas.ctx.lineWidth = state.canvas.lineWidth;\n    canvas.ctx.fillStyle = state.canvas.fillStyle;\n\n    const length = path.points.length;\n    let prev;\n    let point;\n    let i;\n\n    //// curve\n    canvas.ctx.beginPath();\n    canvas.ctx.moveTo(path.first().x, path.first().y);\n    for (i = 1; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n        Canvas2dHelpers.bezierLine(canvas.ctx, prev, point);\n    }\n    canvas.ctx.fill();\n    canvas.ctx.stroke();\n    canvas.ctx.restore();\n    //// helpers\n\n    for (i = 0; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n\n        if (state.showHandles) {\n            if (point.members !== undefined && point.members.length > 1) {\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[0], i + ':left', 'red');\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[1], i + ':right', 'blue');\n            }\n        }\n        if (state.showPoints) {\n            Canvas2dHelpers.drawPoint(canvas.ctx, point, i + ':point', '#666666');\n        }\n        if (state.showPath) {\n            Canvas2dHelpers.drawLine(canvas.ctx, prev, point, '#666666');\n        }\n        if (state.showBounds) {\n            Canvas2dHelpers.drawBoundingBox(canvas.ctx, path, 'yellow');\n        }\n    }\n    canvas.ctx.restore();\n};\n\n////\n// Figures\n////\n\nconst Figures = {\n    // circle\n    circle: function (state) {\n        const path = new Space.Path(state.origin.x, state.origin.y);\n        path.add(50, 50);\n        path.add(150, 50);\n        path.add(150, 150);\n        path.add(50, 150);\n        path.close();\n        path.scale(1.5, 1.5);\n        return path;\n    },\n\n    star: function (state) {\n        const dim = (state.origin.x < state.origin.y) ? state.origin.x : state.origin.y;\n        const margin = dim * 0.2;\n        const outer = dim - margin;\n        const inner = margin;\n        const figure = new Space.Star(state.star.segments, outer, inner, state.origin);\n        return figure.path;\n    },\n\n    flower: function (state) {\n        const dim = (state.origin.x < state.origin.y) ? state.origin.x : state.origin.y;\n        const margin = dim * 0.2;\n        const outer = dim - margin;\n        const inner = 10;\n        const figure = new Space.Star(state.flower.segments, outer, inner, state.origin);\n        figure.flower(state.flower.outerTension);\n        return figure.path;\n    },\n\n    seaStar: function (state) {\n        const dim = (state.origin.x < state.origin.y) ? state.origin.x : state.origin.y;\n        const margin = dim * 0.2;\n        const outer = dim - margin;\n        const inner = margin;\n        const figure = new Space.Star(state.seaStar.segments, outer, inner, state.origin);\n        figure.seaStar(state.seaStar.innerTension);\n        return figure.path;\n    },\n\n    free: function (state) {\n        const path = new Space.Path();\n        path.points = [\n            new Space.Point.Cartesian(20, 50),\n            new Space.Point.Cartesian(100, 100),\n            new Space.Point.Cartesian(150, 50),\n            new Space.Point.Cartesian(200, 150),\n            new Space.Point.Cartesian(250, 50),\n            new Space.Point.Cartesian(300, 70),\n            new Space.Point.Cartesian(310, 130),\n            new Space.Point.Cartesian(380, 30)\n        ];\n        path.scale(2, 2);\n        path.translate(50, state.origin.y / 2);\n        return path;\n    },\n\n    random: function (state, canvas) {\n        const path = new Space.Path();\n        const segments = Utils.randInt(10, 100);\n        const range = 200;\n        let rand;\n        path.add(new Space.Group(canvas.width / 2, canvas.height / 2));\n        for (let i = 0; i < segments; i += 1) {\n            rand = new Space.Point.Cartesian(\n                Utils.randInt(-range, range) * Utils.randInt(),\n                Utils.randInt(-range, range) * Utils.randInt()\n            );\n            rand.add(path.last());\n            rand.x = Utils.bounds(rand.x, 0, canvas.width);\n            rand.y = Utils.bounds(rand.y, 0, canvas.height);\n            path.add(rand);\n        }\n        return path;\n    },\n\n    triplet: function (state) {\n        const path = new Space.Path(state.origin.x, state.origin.y);\n        path.add(-200, -200);\n        path.progress(100, 200);\n        path.progress(100, -200);\n        return path;\n    }\n};\n\nconst defaults = {\n    strokeStyle: 'rgba(255, 255, 255, 1)',\n    fillStyle: 'transparent', //'rgba(255, 255, 255, 1)',\n    lineWidth: 2\n};\n\nexport default {\n    name: 'BezierPath',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    created: function () {\n        this.$on('color-picker:fillStyle', (val) => {\n            this.state.canvas.fillStyle = val;\n            this.state.fill.edit = false;\n            this.init();\n        });\n        this.$on('color-picker:strokeStyle', (val) => {\n            this.state.canvas.strokeStyle = val;\n            this.state.stroke.edit = false;\n            this.init();\n        });\n        this.$on('edit-path-points:updated', () => {\n            this.update();\n        });\n    },\n    watch: {\n        '$route'(to) {\n            this.state.figure = to.params.figure;\n            this.init();\n        }\n    },\n    data: function () {\n        return {\n            state: {\n                origin: null,\n                canvas: this.appState.factor('canvas', defaults),\n                stroke: {\n                    edit: false\n                },\n                fill: {\n                    edit: false\n                },\n                path: {\n                    edit: false\n                },\n                // helpers\n                showHandles: true,\n                showPoints: true,\n                showPath: false,\n                showBounds: false,\n                figure: (typeof this.$route.params.figure !== 'undefined') ? this.$route.params.figure : 'free',\n                // special states\n                circle: {\n                    tension: 0.5\n                },\n                star: {\n                    segments: 6,\n                    tension: 0.5\n                },\n                flower: {\n                    segments: 6,\n                    outerTension: 15\n                },\n                seaStar: {\n                    segments: 6,\n                    innerTension: 0.5\n                },\n                free: {\n                    tension: 0.5\n                },\n                random: {\n                    tension: 0.5\n                },\n                triplet: {\n                    tension: 0.5\n                }\n            },\n            path: null\n        };\n    },\n    components: {\n        ColorPicker,\n        Dev,\n        EditPathPoints\n    },\n    mounted() {\n        //@TODO cancel animation\n        this.animation.only(() => {}).cancel(); // !!!!!\n        this.init();\n    },\n    methods: {\n\n        // compute path and draw\n        init: function (figure) {\n            if (figure !== undefined) {\n                this.state.figure = figure;\n            }\n            let timeout = null;\n            this.canvas.clear();\n\n            //@TODO\n            timeout = window.setTimeout(() => {\n                // !in timeout\n                if (!this.state.origin) {\n                    this.state.origin = new Space.Point.Cartesian(this.canvas.canvas.width / 2, this.canvas.canvas.height / 2);\n                }\n                this.path = Figures[this.state.figure](this.state, this.canvas.canvas);\n\n                compute(this.path, this.state, this.canvas.canvas);\n                draw(this.path, this.state, this.canvas);\n                window.clearTimeout(timeout);\n            }, 100);\n        },\n\n        // draws from state path\n        update: function () {\n            let timeout = null;\n            this.canvas.clear();\n\n            //@TODO\n            timeout = window.setTimeout(() => {\n                draw(this.path, this.state, this.canvas);\n                window.clearTimeout(timeout);\n            }, 100);\n        },\n\n        goTo(figure) {\n            this.$router.push({ name: this.$route.name, params: { figure: figure } });\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section>\n            <div class=\"mui-dropdown\">\n                <button class=\"mui-btn mui-btn-small\" data-mui-toggle=\"dropdown\">\n                    {{ (figure) ? figure : 'Choose' }}\n                    <span class=\"mui-caret mui--text-accent\"></span>\n                </button>\n                <ul class=\"mui-dropdown__menu\">\n                    <li\n                        v-for=\"fig in figures\"\n                        v-if=\"fig.name !== figure\"\n                        v-bind:class=\"{'router-link-active': fig.name === figure}\"\n                    >\n                        <a v-on:click=\"goTo(fig)\">{{ fig.name }}</a>\n                    </li>\n                </ul>\n            </div>\n        </section>\n\n        <!-- helpers -->\n        <section class=\"mui-form\">\n            <legend>Helpers</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPoints\" v-on:change=\"init()\"> Points\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPath\" v-on:change=\"init()\"> Path\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showBounds\" v-on:change=\"init()\"> Bounding Box\n                </label>\n            </div>\n        </section>\n\n        <!-- figure:path -->\n        <section class=\"mui-form--inline\" v-if=\"figure === 'Path'\">\n            <div class=\"app--inline-field mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Path.segments\" v-on:change=\"init()\" >\n                <label>Segments <small>({{ state.Path.segments }})</small></label>\n            </div>\n        </section>\n\n        <!-- figure:polygon -->\n        <section class=\"mui-form--inline\" v-if=\"figure === 'Polygon'\">\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Polygon.segments\" v-on:change=\"init()\" >\n                <label>Segments</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Polygon.radius\" v-on:change=\"init()\" >\n                <label>Radius</label>\n            </div>\n        </section>\n\n        <!-- figure:star -->\n        <section class=\"mui-form--inline\" v-if=\"figure === 'Star'\">\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Star.segments\" v-on:change=\"init()\" >\n                <label>Segments</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Star.outerRadius\" v-on:change=\"init()\" >\n                <label>outer Radius</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Star.innerRadius\" v-on:change=\"init()\" >\n                <label>inner Radius</label>\n            </div>\n        </section>\n\n        <!-- figure:cog -->\n        <section class=\"mui-form--inline\" v-if=\"figure === 'Cog'\">\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Cog.segments\" v-on:change=\"init()\" >\n                <label>Segments</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Cog.outerRadius\" v-on:change=\"init()\" >\n                <label>outer Radius</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Cog.innerRadius\" v-on:change=\"init()\" >\n                <label>inner Radius</label>\n            </div>\n        </section>\n\n        <!-- figure:rectangle -->\n        <section class=\"mui-form--inline\"  v-if=\"figure === 'Rectangle'\">\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Rectangle.width\" v-on:change=\"init()\" >\n                <label>Width</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Rectangle.height\" v-on:change=\"init()\" >\n                <label>Height</label>\n            </div>\n        </section>\n\n        <!-- colors, stroke -->\n        <section class=\"mui-form--inline\" v-if=\"state.fill.form\">\n            <legend>Background</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.fill.show\" v-on:change=\"init()\"> Show\n                </label>\n            </div>\n            <div class=\"mui-checkbox\" v-if=\"state.fill.show\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.fill.edit\" > Edit\n                </label>\n            </div>\n            <div v-if=\"state.fill.edit\">\n                <color-picker :targ=\"'fillStyle'\" :rgba=\"state.canvas.fillStyle\"></color-picker>\n            </div>\n        </section>\n\n        <!-- colors, stroke -->\n        <section class=\"mui-form--inline\">\n            <legend>Stroke</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.stroke.show\" v-on:change=\"init()\"> Show\n                </label>\n            </div>\n            <div class=\"mui-checkbox\" v-if=\"state.stroke.show\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.stroke.edit\" > Edit\n                </label>\n            </div>\n\n            <div v-if=\"state.stroke.edit\">\n                <div  class=\"mui-panel\">\n                    <div class=\"mui-textfield\">\n                        <input type=\"text\" v-model.number=\"state.canvas.lineWidth\" v-on:change=\"init()\" >\n                        <label>Width</label>\n                    </div>\n                </div>\n                <color-picker :targ=\"'strokeStyle'\" :rgba=\"state.canvas.strokeStyle\"></color-picker>\n            </div>\n        </section>\n\n        <!-- translate -->\n        <section class=\"mui-form--inline\">\n            <legend>Translate</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.tanslate[0]\" v-on:change=\"init()\" >\n                <label>X</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.tanslate[1]\" v-on:change=\"init()\" >\n                <label>Y</label>\n            </div>\n        </section>\n\n        <!-- scale-->\n        <section class=\"mui-form--inline\">\n            <legend>Scale</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.scale[0]\" v-on:change=\"init()\" >\n                <label>X</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.scale[1]\" v-on:change=\"init()\" >\n                <label>Y</label>\n            </div>\n        </section>\n\n        <!-- rotate-->\n        <section class=\"mui-form--inline\">\n            <legend>Rotate</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.rotate2D\" v-on:change=\"init()\" >\n                <label>rad</label>\n            </div>\n        </section>\n\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Canvas2dHelpers from '../Canvas2dHelpers';\nimport Utils from '../Utils';\nimport Routes from '../Routes';\nimport ColorPicker from '../Form/ColorPicker.vue';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (figure, state, canvas) {\n\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n\n    let fig;\n    let segments;\n\n    switch (figure) {\n\n        case 'Path': {\n            const margin = 100;\n            segments = state.Path.segments;\n            const x = (canvas.width - (2 * margin)) / segments;\n            let y = canvas.height - (2 * margin);\n            fig = new Space.Path();\n            fig.add(margin, margin);\n            while (segments > 0) {\n                fig.progress(x, y);\n                y = -y;\n                segments -= 1;\n            }\n            break;\n        }\n\n        case 'Polygon': {\n            fig = new Space.Polygon(state.Polygon.segments, state.Polygon.radius, state.origin);\n            break;\n        }\n\n        case 'Rectangle': {\n            fig = new Space.Rectangle(state.Rectangle.width, state.Rectangle.height, state.origin);\n            break;\n        }\n\n        case 'Star': {\n            fig = new Space.Star(state.Star.segments, state.Star.outerRadius, state.Star.innerRadius, state.origin);\n            break;\n        }\n\n        case 'Cog': {\n            fig = new Space.Cog(state.Cog.segments, state.Cog.outerRadius, state.Cog.innerRadius, state.origin);\n            break;\n        }\n\n        default: {\n            fig = null;\n        }\n\n    }\n\n    //Figure or only Path\n    const path = (typeof fig.path !== 'undefined') ? fig.path : fig;\n\n    // translate\n    const hasTranslate = state.tanslate.reduce((a, b) => {\n        return a + b;\n    });\n\n    if (hasTranslate) {\n        path.translate(state.tanslate[0], state.tanslate[1]);\n    }\n\n    // translate\n    const hasScale = state.scale.reduce((a, b) => {\n        return a * b;\n    });\n\n    // scale\n    if (hasScale !== 1) {\n        path.scale(state.scale[0], state.scale[1]);\n    }\n\n    // rotate 2d\n    if (state.rotate2D) {\n        path.rotate2D(Utils.radians(state.rotate2D));\n    }\n\n    return path;\n\n};\n\nconst draw = function (figure, path, state, canvas) {\n    canvas.ctx.save();\n    // styles\n    canvas.ctx.fillStyle = (state.fill.show && figure !== 'Path') ? state.canvas.fillStyle : 'transparent';\n    canvas.ctx.strokeStyle = state.canvas.strokeStyle;\n    canvas.ctx.lineWidth = state.canvas.lineWidth;\n\n    // path\n    canvas.ctx.beginPath();\n    canvas.ctx.moveTo(path.first().x, path.first().y);\n    path.points.forEach((point, index) => {\n        if (index === 0) {\n            return;\n        }\n        canvas.ctx.lineTo(point.x, point.y);\n    });\n\n    // draw\n    if (state.canvas.fillStyle) {\n        canvas.ctx.fill();\n    }\n    canvas.ctx.stroke();\n\n    // finish\n    canvas.ctx.closePath();\n    canvas.ctx.restore();\n\n    //// helpers\n    const length = path.points.length;\n    let prev;\n    let point;\n    let i;\n\n    for (i = 0; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n\n        if (state.showPoints) {\n            Canvas2dHelpers.drawPoint(canvas.ctx, point, i + ':point', 'orange');\n        }\n        if (state.showPath) {\n            Canvas2dHelpers.drawLine(canvas.ctx, prev, point, '#666666');\n        }\n        if (state.showBounds) {\n            Canvas2dHelpers.drawBoundingBox(canvas.ctx, path, 'yellow');\n        }\n    }\n};\n\nconst defaults = {\n    strokeStyle: 'rgba(255, 255, 255, 1)',\n    fillStyle: 'rgba(255, 255, 255, 1)',\n    lineWidth: 2\n};\n\nexport default {\n    name: 'Figures',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    watch: {\n        '$route'(to) {\n            this.figure = to.params.figure;\n            this.state.canvas = this.appState.factor('canvas', defaults);\n            this.init();\n        }\n    },\n    created: function () {\n        this.$on('color-picker:fillStyle', (val) => {\n            this.state.canvas.fillStyle = val;\n            this.state.fill.edit = false;\n            this.init();\n        });\n        this.$on('color-picker:strokeStyle', (val) => {\n            this.state.canvas.strokeStyle = val;\n            this.state.stroke.edit = false;\n            this.init();\n        });\n    },\n    data: function () {\n        return {\n            state: {\n                origin: null,\n                canvas: this.appState.factor('canvas', defaults),\n                // form\n                fill: {\n                    form: true,\n                    show: true,\n                    edit: false\n                },\n                stroke: {\n                    show: true,\n                    edit: false\n                },\n                // transform\n                tanslate: [0, 0],\n                scale: [1, 1],\n                rotate2D: 0,\n                // helpers\n                showPoints: false,\n                showPath: false,\n                showBounds: false,\n                // form defaults per figure\n                Path: {\n                    segments: 25\n                },\n                Polygon: {\n                    segments: 6,\n                    radius: 200\n                },\n                Star: {\n                    segments: 5,\n                    outerRadius: 200,\n                    innerRadius: 70\n                },\n                Cog: {\n                    segments: 5,\n                    outerRadius: 200,\n                    innerRadius: 125\n                },\n                Rectangle: {\n                    width: 300,\n                    height: 200\n                }\n            },\n            figures: Routes.figures(),\n            figure: (typeof this.$route.params.figure !== 'undefined') ? this.$route.params.figure : 'Path'\n        };\n    },\n    components: {\n        ColorPicker,\n        Dev\n    },\n    mounted() {\n        //@TODO cancel animation\n        this.animation.only(() => {}).cancel(); // !!!!!\n        this.init();\n    },\n    methods: {\n        init: function () {\n            let timeout = null;\n            this.canvas.clear();\n            this.initForms();\n            //@TODO\n            timeout = window.setTimeout(() => {\n                const path = compute(this.figure, this.state, this.canvas.canvas);\n                draw(this.figure, path, this.state, this.canvas);\n                window.clearTimeout(timeout);\n            }, 100);\n        },\n        initForms: function () {\n            this.state.fill.form = (this.figure !== 'Path');\n        },\n        goTo(figure) {\n            this.$router.push({ name: this.$route.name, params: { figure: figure.name } });\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segments\" min=\"10\" max=\"800\" step=\"10\">\n                <label>Segments <small>({{ state.segments }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.prev) {\n        state.prev = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n    const path = new Space.Path();\n    const range = state.segmentsRange;\n    let count = 0;\n    let rand;\n    path.add(state.prev);\n    while (count < state.segments) {\n        rand = new Space.Point.Cartesian(\n            Utils.randInt(-range, range) * Utils.randInt(),\n            Utils.randInt(-range, range) * Utils.randInt()\n        );\n        rand.add(path.last());\n        rand.x = Utils.bounds(rand.x, 0, canvas.width);\n        rand.y = Utils.bounds(rand.y, 0, canvas.height);\n        path.add(rand);\n        count += 1;\n    }\n\n    state.prev = path.last();\n    return path;\n};\n\nexport default {\n    name: 'Path',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: null,\n                segments: 200,\n                segmentsRange: 10,\n                canvas: this.appState.factor('canvas')\n            }\n        };\n    },\n    mounted() {\n        let path;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            path = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(path.first().x, path.first().y);\n            path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n                // draw\n                this.canvas.ctx.stroke();\n            });\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.radiusRange\" min=\"5\" max=\"500\">\n                <label>Radius Range <small>({{ state.radiusRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n    let radius = Math.floor(Utils.randInt(5, state.radiusRange));\n    let segments = Math.floor(Utils.randInt(3, state.segmentsRange));\n    segments = Utils.bounds(segments, false, 25);\n    radius = Utils.bounds(radius, false, canvas.width / 2);\n\n    state.prev.segments = segments;\n    state.prev.radius = radius;\n\n    return new Space.Polygon(segments, radius, state.origin);\n};\n\nexport default {\n    name: 'Polygon',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    segments: 3,\n                    radius: 50\n                },\n                segmentsRange: 10,\n                radiusRange: 200,\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(99, 9, 9, .8)'\n                })\n            }\n        };\n    },\n    mounted() {\n        let polygon;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.fillStyle = this.state.canvas.fillStyle;\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n            polygon.path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n            });\n\n            // draw\n            if (this.state.canvas.fillStyle) {\n                this.canvas.ctx.fill();\n            }\n            this.canvas.ctx.stroke();\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.widthRange\" min=\"5\" max=\"1000\">\n                <label>Width Range <small>({{ state.widthRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.heightRange\" min=\"5\" max=\"1000\">\n                <label>Height Range <small>({{ state.heightRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n    const width = Math.floor(Utils.randInt(5, state.widthRange));\n    const height = Math.floor(Utils.randInt(3, state.heightRange));\n\n    state.prev.width = width;\n    state.prev.height = height;\n\n    return new Space.Rectangle(width, height, state.origin);\n};\n\nexport default {\n    name: 'Rectangle',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    width: 25,\n                    height: 50\n                },\n                widthRange: 500,\n                heightRange: 500,\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(255, 255, 255, .2)'\n                })\n            }\n        };\n    },\n    mounted() {\n        let polygon;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.fillStyle = this.state.canvas.fillStyle;\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n            polygon.path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n            });\n\n            // draw\n            if (this.state.canvas.fillStyle) {\n                this.canvas.ctx.fill();\n            }\n            this.canvas.ctx.stroke();\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.outerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Outer Radius Range <small>({{ state.outerRadiusRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.innerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Inner Radius Range <small>({{ state.innerRadiusRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n\n    let outerRadius = Math.floor(Utils.randInt(5, state.outerRadiusRange));\n    let innerRadius = Math.floor(Utils.randInt(5, state.innerRadiusRange));\n    let segments = Math.floor(Utils.randInt(3, state.segmentsRange));\n    segments = Utils.bounds(segments, false, 25);\n    outerRadius = Utils.bounds(outerRadius, false, canvas.width / 2);\n    innerRadius = Utils.bounds(innerRadius, false, canvas.width / 2);\n\n    state.prev.segments = segments;\n    state.prev.outerRadius = outerRadius;\n    state.prev.innerRadius = innerRadius;\n\n    return new Space.Star(segments, outerRadius, innerRadius, state.origin);\n};\n\nexport default {\n    name: 'Star',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    segments: 3,\n                    outerRadius: 50,\n                    innerRadius: 10\n                },\n                segmentsRange: 10,\n                outerRadiusRange: 200,\n                innerRadiusRange: 200,\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(0, 99, 0, .6)'\n                })\n            }\n        };\n    },\n    mounted() {\n        let polygon;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.fillStyle = this.state.canvas.fillStyle;\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n            polygon.path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n            });\n\n            // draw\n            if (this.state.canvas.fillStyle) {\n                this.canvas.ctx.fill();\n            }\n            this.canvas.ctx.stroke();\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.outerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Outer Radius Range <small>({{ state.outerRadiusRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.innerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Inner Radius Range <small>({{ state.innerRadiusRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n\n    let outerRadius = Math.floor(Utils.randInt(5, state.outerRadiusRange));\n    let innerRadius = Math.floor(Utils.randInt(5, state.innerRadiusRange));\n    let segments = Math.floor(Utils.randInt(3, state.segmentsRange));\n    segments = Utils.bounds(segments, false, 25);\n    outerRadius = Utils.bounds(outerRadius, false, canvas.width / 2);\n    innerRadius = Utils.bounds(innerRadius, false, canvas.width / 2);\n\n    state.prev.segments = segments;\n    state.prev.outerRadius = outerRadius;\n    state.prev.innerRadius = innerRadius;\n\n    return new Space.Cog(segments, outerRadius, innerRadius, state.origin);\n};\n\nexport default {\n    name: 'Star',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    segments: 3,\n                    outerRadius: 50,\n                    innerRadius: 10\n                },\n                segmentsRange: 10,\n                outerRadiusRange: 200,\n                innerRadiusRange: 200,\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(0, 99, 0, .6)'\n                })\n            }\n        };\n    },\n    mounted() {\n        let polygon;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.fillStyle = this.state.canvas.fillStyle;\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n            polygon.path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n            });\n\n            // draw\n            if (this.state.canvas.fillStyle) {\n                this.canvas.ctx.fill();\n            }\n            this.canvas.ctx.stroke();\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segments\" min=\"3\" max=\"60\" step=\"1\">\n                <label>Segments <small>({{ state.segments }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"0\" max=\"1\" step=\"0.1\">\n                <label>Segments range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.tension\" min=\"-2\" max=\"2\" step=\"0.1\">\n                <label>Corner tension <small>({{ state.tension }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\nimport Canvas2dHelpers from '../Canvas2dHelpers';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    const path = new Space.Path();\n    const phi = (Math.PI * 2) / state.segments;\n    const maxR = (canvas.width < canvas.height) ? (canvas.width / 3) : (canvas.height / 3);\n    const minR = maxR * state.segmentsRange;\n    let r;\n    let p;\n    for (let i = 0; i < state.segments; i += 1) {\n        r = Utils.randInt(minR, maxR);\n        p = new Space.Point.Polar(r, i * phi);\n        path.add(new Space.Group(p.x(), p.y()));\n    }\n    path.close();\n    path.translate(canvas.width / 2, canvas.height / 2);\n    Space.Bezier.smoothPath(path, state.tension);\n    return path;\n};\n\nexport default {\n    name: 'Path',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                segments: 10,\n                segmentsRange: 0.3,\n                canvas: this.appState.factor('canvas', {\n                    lineWidth: 0.5\n                }),\n                tension: 0.5\n            }\n        };\n    },\n    mounted() {\n        let path;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            path = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            //// curve\n            const length = path.points.length;\n            let prev;\n            let point;\n            let i;\n\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(path.first().x, path.first().y);\n            for (i = 1; i < length; i += 1) {\n                prev = path.prev(i);\n                point = path.get(i);\n                Canvas2dHelpers.bezierLine(this.canvas.ctx, prev, point);\n            }\n            this.canvas.ctx.fill();\n            this.canvas.ctx.stroke();\n        })\n        .play()\n        ;\n    }\n};\n\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.steps\" min=\"10\" max=\"1000\" step=\"10\">\n                <label>Steps <small>( {{(morpher) ? morpher.count : 0}} of {{ state.steps }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"create()\">Go</button>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Canvas2dHelpers from '../Canvas2dHelpers';\n\nconst Space = window.Space;\n\nconst createTarget = function (state) {\n    return new Space.Star(state.Star.segments, state.Star.outerRadius, state.Star.innerRadius, state.origin);\n};\n\nconst createMorpher = function (path, state) {\n    const from = new Space.Point.Cartesian(0, state.canvas.height / 2);\n    const to = new Space.Point.Cartesian(state.canvas.width, state.canvas.height / 2);\n\n    const src = new Space.Line(from, to, path.length());\n    return new Space.Morpher(path, src.path, state.steps);\n};\n\nconst compute = function (morpher) {\n    if (morpher.finished()) {\n        morpher.reverse();\n    }\n    morpher.progress();\n};\n\nconst draw = function (path, state, canvas) {\n    canvas.ctx.save();\n    canvas.ctx.strokeStyle = state.canvas.strokeStyle;\n    canvas.ctx.lineWidth = state.canvas.lineWidth;\n    canvas.ctx.fillStyle = state.canvas.fillStyle;\n\n    const length = path.points.length;\n    let prev;\n    let point;\n    let i;\n\n    //// curve\n    canvas.ctx.beginPath();\n    canvas.ctx.moveTo(path.first().x, path.first().y);\n    for (i = 1; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n        Canvas2dHelpers.bezierLine(canvas.ctx, prev, point);\n    }\n    canvas.ctx.fill();\n    canvas.ctx.stroke();\n    canvas.ctx.restore();\n    //// helpers\n\n    for (i = 0; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n\n        if (state.showHandles) {\n            if (point.members !== undefined && point.members.length > 1) {\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[0], i + ':left', 'red');\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[1], i + ':right', 'blue');\n            }\n        }\n        if (state.showPoints) {\n            Canvas2dHelpers.drawPoint(canvas.ctx, point, i + ':point', '#666666');\n        }\n        if (state.showPath) {\n            Canvas2dHelpers.drawLine(canvas.ctx, prev, point, '#666666');\n        }\n        if (state.showBounds) {\n            Canvas2dHelpers.drawBoundingBox(canvas.ctx, path, 'yellow');\n        }\n    }\n    canvas.ctx.restore();\n};\n\nexport default {\n    name: 'Home',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    figures: {}\n                },\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'white',\n                    lineWidth: 1\n                }),\n                Star: {\n                    segments: 5,\n                    outerRadius: 200,\n                    innerRadius: 70\n                },\n                steps: 100\n            },\n            figure: null,\n            morpher: null\n        };\n    },\n    created() {\n        // temp redirect\n        // this.$router.push('/Path');\n    },\n    methods: {\n        init: function () {\n            this.state.origin = new Space.Point.Cartesian(this.state.canvas.width / 2, this.state.canvas.height / 2);\n        },\n        create: function () {\n            this.figure = createTarget(this.state);\n            this.morpher = createMorpher(this.figure.path, this.state);\n        }\n    },\n    mounted() {\n        this.canvas.fill();\n\n        this.animation\n        .fps(32)\n        .only(() => {\n            // @TODO\n            if (!this.state.origin) {\n                this.init();\n                this.create();\n                return;\n            }\n\n            compute(this.morpher);\n            draw(this.figure.path, this.state, this.canvas);\n            // init\n            this.canvas.fill();\n\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","// landing views\nimport Home from './Home.vue';\nimport BezierPath from './Figures/BezierPath.vue';\nimport Figures from './Figures/Figures.vue';\n// single views\nimport Path from './Paths/Path.vue';\nimport Polygon from './Paths/Polygon.vue';\nimport Rectangle from './Paths/Rectangle.vue';\nimport Star from './Paths/Star.vue';\nimport Cog from './Paths/Cog.vue';\nimport Bezier from './BezierPaths/Bezier.vue';\nimport Morpher from './Morphing/Morpher.vue';\n\nconst routes = [\n    {\n        name: '',\n        path: '/',\n        component: Path,\n        meta: {\n            menu: false,\n            figure: false\n        }\n    },\n    {\n        name: 'Home',\n        path: '/Home',\n        component: Home,\n        meta: {\n            menu: false,\n            figure: false\n        }\n    },\n    {\n        name: 'Path',\n        path: '/Path',\n        component: Path,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Polygon',\n        path: '/Polygon',\n        component: Polygon,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Rectangle',\n        path: '/Rectangle',\n        component: Rectangle,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Star',\n        path: '/Star',\n        component: Star,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Cog',\n        path: '/Cog',\n        component: Cog,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Bezier',\n        path: '/Bezier',\n        component: Bezier,\n        meta: {\n            menu: true,\n            figure: false\n        }\n    },\n    {\n        name: 'Figures',\n        path: '/Figures/:figure?',\n        component: Figures,\n        meta: {\n            menu: true,\n            figure: false\n        }\n    },\n    {\n        name: 'BezierPaths',\n        path: '/BezierPath/:figure?',\n        component: BezierPath,\n        meta: {\n            menu: true,\n            figure: false\n        }\n    },\n    {\n        name: 'Morph',\n        path: '/Morph/:srcFigure?/:targFigure?',\n        component: Morpher,\n        meta: {\n            menu: true,\n            figure: false\n        }\n    },\n    // catch all redirect\n    {\n        name: '',\n        path: '*',\n        redirect: '/',\n        meta: {\n            menu: false,\n            figure: false\n        }\n    }\n];\n\nconst figures = function () {\n    return routes.filter((item) => {\n        return item.meta.figure;\n    });\n};\n\nconst menu = function () {\n    return routes\n    .filter((item) => {\n        return item.meta.menu;\n    })\n    .map((item) => {\n        return {\n            name: item.name,\n            path: item.path,\n            meta: item.meta || {}\n        };\n    });\n};\n\nconst byName = function (name) {\n    let i;\n    for (i = 1; i < routes.length; i += 1) {\n        if (routes[i].name === name) {\n            return routes[i];\n        }\n    }\n    return null;\n};\n\nexport default {\n    routes: routes,\n    figures: figures,\n    menu: menu,\n    byName: byName\n};\n","<template>\n    <div>\n        <section v-if=\"animation.id\" class=\"mui-form\">\n            <legend>Animation <small>{{animation.count}}</small></legend>\n            <a v-on:click=\"animation.toggle()\" class=\"mui-btn mui-btn--small mui-btn--primary\">\n                {{(animation.running) ? 'pause' : 'play'}}\n            </a>\n            <a v-on:click=\"show = !show\" class=\"mui-btn mui-btn--small app--btn\">Throttle</a>\n\n            <div v-if=\"show\" class=\"mui-panel\">\n                <div class=\"mui-textfield\" style=\"\">\n                    <input type=\"range\" v-on:change=\"throttle($event.target.value)\" min=\"0\" max=\"100\">\n                    <label>fps <small>({{1000 / animation.interval}})</small></label>\n                </div>\n            </div>\n        </section>\n\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'Animation',\n    props: ['animation'],\n    data: function () {\n        return {\n            show: false\n        };\n    },\n    methods: {\n        throttle: function (value) {\n            if (value === null) {\n                return;\n            }\n            value = parseInt(value, 10);\n            if (!isNaN(value)) {\n                this.animation.fps(value);\n            }\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <header id=\"header\">\n            <div class=\"mui-appbar mui--appbar-line-height mui--z1\">\n                <div class=\"mui-container-fluid\">\n                    <table width=\"100%\">\n                        <tr class=\"mui--appbar-height\">\n                            <td>\n                                <span class=\"app--brand\"></span>\n                                <div class=\"mui-dropdown\">\n                                    <button class=\"mui-btn mui-btn-small\" data-mui-toggle=\"dropdown\">\n                                        Space <span class=\"mui--text-accent\">/</span> {{ $route.name }}\n                                        <span class=\"mui-caret mui--text-accent\"></span>\n                                    </button>\n                                    <ul class=\"mui-dropdown__menu\">\n                                        <li\n                                            v-for=\"route in routes\"\n                                            v-if=\"route.name\"\n                                            v-bind:class=\"{'router-link-active': $route.name === route.name}\"\n                                        >\n                                            <a v-on:click=\"goTo(route)\">{{ route.name }}</a>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </td>\n                            <td>\n                                <a class=\"app--sidebar-trigger mui--pull-right mui--text-display1\" v-on:click=\"toggle()\"><i class=\"zmdi zmdi-settings\"></i></a>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n        </header>\n\n        <footer id=\"footer\">\n            <div class=\"app--footer-content mui-container-fluid mui--align-middle\">\n                Demo made with <a href=\"https://vuejs.org/\">Vue</a> & <a href=\"https://www.muicss.com\">MUI</a>\n            </div>\n        </footer>\n\n        <aside id=\"sidebar\" class=\"mui-panel\" v-bind:class=\"{'visible': sidebar}\">\n\n            <div v-if=\"$route.name\" class=\"mui--appbar-line-height\">\n                <span class=\"mui--text-title\">{{ $route.name }}</span>\n            </div>\n            <div class=\"mui-divider\"></div>\n\n            <animation :animation=\"animation\"></animation>\n\n           <router-view class=\"view\"\n               :app-state=\"appState\"\n               :animation=\"animation\"\n               :canvas=\"canvas\"\n           ></router-view>\n\n       </aside>\n\n        <main id=\"content\" class=\"mui-container-fluid\">\n            <div class=\"mui-row\">\n                <div class=\"mui-col-md-12 app--canvas\"></div>\n            </div>\n        </main>\n    </div>\n</template>\n\n<script>\nimport Animation from './Form/Animation.vue';\n\nexport default {\n    name: 'app',\n    props: ['animation', 'appState', 'canvas', 'routes'],\n    components: {\n        Animation\n    },\n    mounted() {\n        this.sidebar = document.getElementById('sidebar');\n\n        this.$el.querySelector('.app--canvas').appendChild(this.canvas.canvas);\n        this.canvas.canvas.width = document.body.clientWidth;\n        this.canvas.canvas.height = document.body.clientHeight;\n        this.canvas.ctx.fillStyle = this.appState.canvas.fillStyle;\n        this.canvas.ctx.lineWidth = this.appState.canvas.lineWidth;\n    },\n    methods: {\n        goTo: function (route) {\n            const to = (route.path.indexOf('/:') > -1) ? { name: route.name, params: {} } : route.path;\n            this.$router.push(to);\n        },\n        toggle: function () {\n            if (!this.sidebar) {\n                return;\n            }\n            let right = (this.sidebar.style.right) ? this.sidebar.style.right : window.getComputedStyle(this.sidebar).getPropertyValue('right');\n            right = parseInt(right, 10);\n            this.sidebar.style.right = ((right < 0) ? 0 : -this.sidebar.clientWidth) + 'px';\n        }\n    },\n    data: function () {\n        return {\n            sidebar: null\n        };\n    }\n};\n</script>\n\n<style>\n</style>\n","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\n// rollup-plugin-scss\nimport './main.scss';\n\nimport Animation from './Animation';\nimport Canvas2d from './Canvas2d';\nimport State from './State';\nimport Routes from './Routes';\n\nimport App from './App.vue';\n\nconst animation = new Animation();\nconst canvas = new Canvas2d();\n\n// Create the router\nconst router = new VueRouter({\n    mode: 'hash', //'history',\n    routes: Routes.routes\n});\n\n// 4. Create and mount root instance.\n// Make sure to inject the router.\nnew Vue({\n    router,\n    data: {\n        animation,\n        appState: State,\n        canvas,\n        routes: Routes.menu()\n    },\n    components: {\n        App\n    },\n    //render: h => h(App)\n    template: '<App :app-state=\"appState\" :animation=\"animation\" :canvas=\"canvas\" :routes=\"routes\"/>',\n}).$mount('#app');\n"],"names":["Animation","id","count","running","interval","last","Date","getTime","callbacks","prototype","fps","add","callback","push","clear","splice","length","only","play","now","delta","forEach","fn","window","requestAnimationFrame","stop","pause","cancel","cancelAnimationFrame","toggle","document","CLASS_NAME","Canvas2d","canvas","createElement","className","ctx","getContext","styles","keys","key","clearRect","width","height","fill","fillRect","State","property","merge","min","max","Math","random","val","base","range","bounce","randInt","deg","PI","Space","compute","state","origin","Point","Cartesian","i","figures","path","Path","segments","Utils","prev","points","x","y","star","Star","dim","square","Rectangle","Square","randRgba","rgba","r","round","g","b","a","draw","figure","save","fillStyle","strokeStyle","lineWidth","beginPath","moveTo","first","point","index","lineTo","stroke","closePath","restore","render","appState","factor","animation","tasks","Object","Helpers","from","to","theme","setLineDash","name","fillText","arc","handle","bounds","strokeRect","center","prevM","members","pointM","bezierCurveTo","quadraticCurveTo","match","str","model","n","matches","parseInt","isNaN","RGBA","toString","yiq","$parent","$emit","targ","rgbaString","Bezier","smoothPath","tension","get","bezierLine","showHandles","undefined","drawHandle","showPoints","drawPoint","showPath","drawLine","showBounds","drawBoundingBox","Figures","close","scale","margin","outer","inner","flower","outerTension","seaStar","innerTension","translate","rand","Group","progress","defaults","$on","edit","init","update","params","$route","timeout","setTimeout","clearTimeout","$router","fig","Polygon","radius","outerRadius","innerRadius","Cog","hasTranslate","tanslate","reduce","hasScale","rotate2D","radians","show","Routes","initForms","form","segmentsRange","floor","radiusRange","polygon","widthRange","heightRange","outerRadiusRange","innerRadiusRange","phi","maxR","minR","p","Polar","createTarget","createMorpher","src","Line","Morpher","steps","morpher","finished","reverse","create","routes","Home","BezierPath","filter","item","meta","menu","map","byName","value","sidebar","getElementById","$el","querySelector","appendChild","body","clientWidth","clientHeight","route","indexOf","right","style","getComputedStyle","getPropertyValue","router","VueRouter","Vue","$mount"],"mappings":"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"}