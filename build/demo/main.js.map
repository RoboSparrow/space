{"version":3,"file":null,"sources":["../../src/demo/Animation.js","../../src/demo/Canvas2d.js","../../src/demo/State.js","../../src/demo/Utils.js","../../src/demo/Canvas2dHelpers.js","../../src/demo/Home.vue","../../src/demo/Form/ColorPicker.vue","../../src/demo/Form/EditPathPoints.vue","../../src/demo/Form/Dev.vue","../../src/demo/Figures/BezierPath.vue","../../src/demo/Figures/Figures.vue","../../src/demo/Paths/Path.vue","../../src/demo/Paths/Polygon.vue","../../src/demo/Paths/Rectangle.vue","../../src/demo/Paths/Star.vue","../../src/demo/Paths/Cog.vue","../../src/demo/BezierPaths/Bezier.vue","../../src/demo/Morphing/Morpher.vue","../../src/demo/Routes.js","../../src/demo/Form/Animation.vue","../../src/demo/App.vue","../../src/demo/main.js"],"sourcesContent":["const Animation = function () {\n    this.id = null;\n    this.count = 0;\n    this.running = false;\n    this.interval = -1;\n    this.last = new Date().getTime();\n    this.callbacks = [];\n};\n\n// throttle - set frames per second\nAnimation.prototype.fps = function (fps) {\n    this.interval = (fps < 0) ? -1 : 1000 / fps;\n    return this;\n};\n\n// register callback\nAnimation.prototype.add = function (callback) {\n    this.callbacks.push(callback);\n    return this;\n};\n\n// clear all callbacks\nAnimation.prototype.clear = function () {\n    this.callbacks.splice(0, this.callbacks.length);\n    return this;\n};\n\n// clear existing callbacks and set one\nAnimation.prototype.only = function (callback) {\n    this.clear().add(callback);\n    return this;\n};\n\nAnimation.prototype.play = function () {\n    this.running = true;\n\n    const callback = () => {\n        if (!this.running) {\n            return;\n        }\n\n        const now = new Date().getTime();\n        const delta = now - this.last;\n\n        if (this.interval < 0 || delta > this.interval) {\n            this.last = now - (delta % this.interval);\n            this.callbacks.forEach((fn) => {\n                this.count += 1;\n                fn();\n            });\n        }\n\n        this.id = window.requestAnimationFrame(callback);\n    };\n\n    this.id = window.requestAnimationFrame(callback);\n    return this;\n};\n\nAnimation.prototype.stop = function () {\n    this.running = false;\n    this.count = 0;\n    return this;\n};\n\nAnimation.prototype.pause = function () {\n    this.running = false;\n    return this;\n};\n\nAnimation.prototype.cancel = function () {\n    this.stop();\n    window.cancelAnimationFrame(this.id);\n    this.id = null;\n    return this;\n};\n\nAnimation.prototype.toggle = function () {\n    if (this.running) {\n        this.pause();\n    } else {\n        this.play();\n    }\n    return this;\n};\n\nexport default Animation;\n","const document = window.document;\nconst CLASS_NAME = 'canvas';\n\nconst Canvas2d = function () {\n    const canvas = document.createElement('canvas');\n    canvas.className = CLASS_NAME;\n    const ctx = canvas.getContext('2d');\n\n    this.canvas = canvas;\n    this.ctx = ctx;\n};\n\nCanvas2d.prototype.styles = function (styles) {\n    Object.keys(styles).forEach((key) => {\n        if (key in this.ctx) {\n            this.ctx[key] = styles[key];\n        }\n    });\n};\n\nCanvas2d.prototype.clear = function () {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n};\n\nCanvas2d.prototype.fill = function () {\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n};\n\nexport default Canvas2d;\n","const State = {\n    canvas: {\n        strokeStyle: 'hsla(300, 100%, 75%, 1)',\n        fillStyle: 'rgba(0, 0, 0, .08)',\n        lineWidth: 0.1\n    },\n\n    // shallow(!) clone and merge in submitted properties\n    factor: function (property, merge) {\n        merge = merge || {};\n        Object.keys(this[property]).forEach((key) => {\n            merge[key] = (typeof merge[key] !== 'undefined') ? merge[key] : this[property][key];\n        });\n        return merge;\n    }\n\n};\n\nexport default State;\n","export default {\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    randInt: function (min, max) {\n        min = min || -1;\n        max = max || 1;\n        // eslint-disable-next-line no-mixed-operators\n        return Math.random() * (max - min) + min;\n    },\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    bounds: function (val, min, max) {\n        val = (min !== false && val < min) ? min : val;\n        val = (max !== false && val > max) ? max : val;\n        return val;\n    },\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    randIntRange: function (base, range, bounce = []) {\n        if (bounce.length) {\n            if ((base + range[1]) > bounce[1]) {\n                base -= range[1];\n            }\n            if ((base + range[0]) < bounce[0]) {\n                base -= range[0];\n            }\n        }\n\n        return base + this.randInt(range[0], range[1]);\n    },\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    radians: function (deg) {\n        return deg * (Math.PI / 180);\n    }\n\n};\n","const Helpers = {\n\n    ////\n    // Controls\n    ////\n\n    drawLine: function (ctx, from, to, theme) {\n        if (!from) {\n            return;\n        }\n        ctx.save();\n\n        ctx.fillStyle = theme;\n        ctx.strokeStyle = theme;\n        //ctx.lineWidth = 0.5;\n        ctx.setLineDash([2, 2]);\n\n        ctx.beginPath();\n        ctx.moveTo(from.x, from.y);\n        ctx.lineTo(to.x, to.y);\n        ctx.stroke();\n        ctx.closePath();\n\n        ctx.restore();\n    },\n\n    drawPoint: function (ctx, point, name, theme) {\n        ctx.save();\n\n        ctx.fillStyle = theme;\n        ctx.strokeStyle = theme;\n\n        ctx.fillText(`${name}`, point.x + 10, point.y + 10);\n        ctx.fillRect(point.x - 5, point.y - 5, 10, 10);\n\n        ctx.restore();\n    },\n\n    drawCircle: function (ctx, point, name, theme) {\n        ctx.save();\n\n        ctx.fillStyle = theme;\n\n        ctx.fillText(`${name}`, point.x + 10, point.y + 10);\n        ctx.beginPath();\n        ctx.arc(point.x, point.y, 5, 0, 2 * Math.PI);\n        ctx.fill();\n\n        ctx.closePath();\n        ctx.restore();\n    },\n\n    drawHandle: function (ctx, point, handle, name, theme) {\n        ctx.save();\n\n        ctx.beginPath();\n        ctx.fillStyle = theme;\n        ctx.strokeStyle = theme;\n        ctx.lineWidth = 0.5;\n        ctx.fillText(`${name}`, handle.x + 10, handle.y);\n        ctx.fillRect(handle.x - 5, handle.y - 5, 10, 10);\n        ctx.moveTo(point.x, point.y);\n        ctx.lineTo(handle.x, handle.y);\n        ctx.stroke();\n\n        ctx.closePath();\n        ctx.restore();\n    },\n\n    drawBoundingBox: function (ctx, path, theme) {\n        const bounds = path.bounds();\n        if (!path.bounds()) {\n            return;\n        }\n        ctx.save();\n\n        ctx.fillStyle = theme;\n        ctx.strokeStyle = theme;\n        ctx.lineWidth = 0.2;\n\n        ctx.setLineDash([2, 2]);\n        ctx.strokeRect(bounds.min.x, bounds.min.y, bounds.max.x - bounds.min.x, bounds.max.y - bounds.min.y);\n\n        ctx.beginPath();\n        ctx.moveTo(bounds.center.x, bounds.min.y);\n        ctx.lineTo(bounds.center.x, bounds.max.y);\n        ctx.moveTo(bounds.min.x, bounds.center.y);\n        ctx.lineTo(bounds.max.x, bounds.center.y);\n        ctx.stroke();\n\n        ctx.closePath();\n        ctx.restore();\n    },\n\n    ////\n    // lines\n    ////\n\n    line: function (ctx, prev, point) {\n        if (!prev) {\n            return;\n        }\n        ctx.moveTo(prev.x, prev.y);\n        ctx.lineTo(point.x, point.y);\n    },\n\n    bezierLine: function (ctx, prev, point) {\n        if (!prev) {\n            return;\n        }\n        //ctx.moveTo(prev.x, prev.y);//Dev\n        const prevM = (prev && typeof prev.members !== 'undefined') ? prev.members.length : 0;\n        const pointM = (typeof point.members !== 'undefined') ? point.members.length : 0;\n\n        // line\n        if (!prevM && !pointM) {\n            ctx.lineTo(point.x, point.y);\n            return;\n        }\n        // middle\n        if (prevM > 1 && pointM > 1) {\n            ctx.bezierCurveTo(prev.members[1].x, prev.members[1].y, point.members[0].x, point.members[0].y, point.x, point.y);\n            return;\n        }\n        // start\n        if (!prevM && pointM) {\n            ctx.quadraticCurveTo(point.members[0].x, point.members[0].y, point.x, point.y);\n            return;\n        }\n        // end\n        if (prevM && !pointM) {\n            ctx.quadraticCurveTo(prev.members[1].x, prev.members[1].y, point.x, point.y);\n        }\n    }\n\n};\n\nexport default Helpers;\n","<template>\n    <div>\n        morph: {{state.currentTitle}}, segments {{state.segments}}\n    </div>\n</template>\n\n<script>\nimport Utils from './Utils';\nimport Canvas2dHelpers from './Canvas2dHelpers';\n\nlet paused; //timeout\nconst Space = window.Space;\n\nconst boundary = function (canvas, margin) {\n    margin = margin || 0;\n    return (canvas.width > canvas.height) ? canvas.height - margin : canvas.height - margin;\n};\n\nconst center = function (canvas) {\n    return new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n};\n\nconst Sequence = [\n    {\n        name: 'Star',\n        create: function (state, canvas) {\n            const origin = center(canvas);\n            const outerRadius = boundary(canvas, 50) / 2;\n            const innerRadius = outerRadius / 3;\n            const segments = state.segments / 2 //DEV: FOR COG\n\n            return new Space.Star(segments, outerRadius, innerRadius, origin);\n        }\n    },\n    {\n        name: 'Cog',\n        create: function (state, canvas) {\n            const origin = center(canvas);\n            const outerRadius = boundary(canvas, 50) / 2;\n            const innerRadius = outerRadius / 3;\n            const segments = state.segments / 4; //DEV\n\n            return new Space.Cog(segments, outerRadius, innerRadius, origin);\n        }\n    },\n    {\n        name: 'Rectangle',\n        create: function (state, canvas) {\n            const origin = center(canvas);\n            const width = boundary(canvas, 50);\n            const height = width / 2;\n\n            return new Space.Rectangle(width, height, origin);\n        }\n    }\n];\n\nconst morpher = function (state, canvas) {\n    //TODO peogress state.currentIndex\n    const currentIndex = state.currentIndex;\n    const nextIndex = (currentIndex < Sequence.length) ? currentIndex + 1 : 0;\n\n    const steps = state.steps;\n    const current = Sequence[currentIndex];\n    const next = Sequence[nextIndex];\n\n    const src = current.create(state, canvas);\n    const targ = next.create(state, canvas);\n\n    state.currentTitle = `${current.name} to ${next.name}`;\n\n    return new Space.Morpher(src.path, targ.path, steps);\n};\n\nconst draw = function (path, state, canvas) {\n    canvas.clear();\n\n    canvas.ctx.save();\n    canvas.ctx.strokeStyle = state.canvas.strokeStyle;\n    canvas.ctx.lineWidth = state.canvas.lineWidth;\n    canvas.ctx.fillStyle = state.canvas.fillStyle;\n\n    const length = path.points.length;\n    let prev;\n    let point;\n    let i;\n\n    //// curve\n    canvas.ctx.beginPath();\n    canvas.ctx.moveTo(path.first().x, path.first().y);\n    for (i = 1; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n        Canvas2dHelpers.bezierLine(canvas.ctx, prev, point);\n    }\n    canvas.ctx.fill();\n    canvas.ctx.stroke();\n    canvas.ctx.restore();\n    //// helpers\n\n    for (i = 0; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n\n        if (state.showHandles) {\n            if (point.members !== undefined && point.members.length > 1) {\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[0], i + ':left', 'red');\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[1], i + ':right', 'blue');\n            }\n        }\n\n        if (state.showPoints) {\n            Canvas2dHelpers.drawPoint(canvas.ctx, point, i + ':point', '#666666');\n        }\n        if (state.showPath) {\n            Canvas2dHelpers.drawLine(canvas.ctx, prev, point, '#666666');\n        }\n        if (state.showBounds) {\n            Canvas2dHelpers.drawBoundingBox(canvas.ctx, path, 'yellow');\n        }\n    }\n    canvas.ctx.restore();\n};\n\nexport default {\n    name: 'Home',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    data: function () {\n        return {\n            state: {\n                currentIndex: 0,\n                currentTitle: '',\n                steps: 30,\n                segments: 12,\n\n                prev: {\n                    figures: {}\n                },\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(255, 255, 255, 1)',\n                })\n            },\n            morpher: null\n        };\n    },\n    created() {\n    },\n    mounted() {\n        this.canvas.fill();\n\n        this.animation\n        .fps(32)\n        .only(() => {\n            // compute path\n            this.updateMe();\n\n            // draw\n            draw(this.morpher.src, this.state, this.canvas);\n        })\n        .play()\n        ;\n    },\n    methods: {\n        updateMe: function () {\n\n            if (!this.morpher) {\n                this.morpher = morpher(this.state, this.canvas.canvas);\n            }\n\n            const finished = this.morpher.finished();\n\n            if (finished) {\n                paused = setTimeout(() => {\n                    //morpher.reverse();\n                    this.state.currentIndex = (this.state.currentIndex < Sequence.length - 1) ? this.state.currentIndex + 1 : 0;\n                    this.morpher = morpher(this.state, this.canvas.canvas);\n                    clearTimeout(paused);\n                }, 1000);\n\n                return;\n            }\n\n            this.morpher.progress();\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div class=\"app--color-picker mui-panel\">\n        <table class=\"mui-table\">\n            <tbody>\n                <tr>\n                    <td>\n                        <input type=\"range\" v-model.number=\"RGBA[0]\" min=\"0\" max=\"255\">\n                    </td>\n                    <td>\n                        <strong class=\"app--indicator\" v-bind:style=\"{color:'rgb(' + RGBA[0] + ', 0, 0)'}\">◼</strong>\n                    </td>\n                    <td>\n                        <small>Red({{ RGBA[0] }})</small>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input type=\"range\" v-model.number=\"RGBA[1]\" min=\"0\" max=\"255\">\n                    </td>\n                    <td>\n                        <strong class=\"app--indicator\" v-bind:style=\"{color:'rgb(0, ' + RGBA[1] + ', 0)'}\">◼</strong>\n                    </td>\n                    <td>\n                        <small>Green({{ RGBA[1] }})</small>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input type=\"range\" v-model.number=\"RGBA[2]\" min=\"0\" max=\"255\">\n                    </td>\n                    <td>\n                        <strong class=\"app--indicator\" v-bind:style=\"{color:'rgb(0, 0, ' + RGBA[2] + ')'}\">◼</strong>\n                    </td>\n                    <td>\n                         <small>Blue({{ RGBA[2] }})</small>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                         <input type=\"range\" v-model.number=\"RGBA[3]\" min=\"0\" max=\"1\" step=\"0.1\">\n                    </td>\n                    <td></td>\n                    <td>\n                        <small>Alpha({{ RGBA[3] }})</small>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        <pre class=\"app--color\" v-bind:style=\"{backgroundColor: rgbaString, color: rgbaStringContrast}\">{{rgbaString}}</pre>\n\n        <a  class=\"mui-btn mui-btn--small mui-btn--primary\" v-on:click=\"setColor()\">Set color</a>\n    </div>\n</template>\n\n<script>\nconst match = function (str, model) {\n    if (!str || str === 'transparent') {\n        return [0, 0, 0, 1];\n    }\n    let i;\n    let n;\n    const matches = str.match(/\\d+/g);\n    for (i = 0; i < matches.length; i += 1) {\n        n = parseInt(matches[i], 10);\n        if (!isNaN(n)) {\n            model[i] = matches[i];\n        }\n    }\n    return matches;\n};\n\nexport default {\n    name: 'ColorPicker',\n    props: [\n        'rgba',\n        'targ'\n    ],\n    data: function () {\n        return {\n            RGBA: match(this.rgba, [0, 0, 0, 1])\n        };\n    },\n    computed: {\n        rgbaString: function () {\n            return 'rgba(' + this.RGBA.toString() + ')';\n        },\n        rgbaStringContrast: function () {\n            const yiq = ((this.RGBA[0] * 299) + (this.RGBA[1] * 587) + (this.RGBA[2] * 114)) / 1000;\n            return (yiq >= 128) ? 'black' : 'white';\n        }\n    },\n    methods: {\n        setColor: function () {\n            this.$parent.$emit('color-picker:' + this.targ, this.rgbaString);\n        }\n    },\n};\n</script>\n\n<style>\n    .app--color-picker pre {\n        text-align: center;\n        border: 1px solid white;\n        padding: 10px;\n        font-size: 10px;\n    }\n</style>\n","<template>\n    <div>\n        <div class=\"app--micro-form\" v-if=\"path && path.points !== 'undefined'\">\n            <div v-for=\"(point, index) in path.points\">\n                <strong>Point {{index}}</strong>\n                <div>\n                    <input type=\"text\" v-model.number=\"point.x\" v-on:change=\"update()\" size=\"3\">\n                    <label>x</label>\n                    <input type=\"text\" v-model.number=\"point.y\" v-on:change=\"update()\" size=\"3\">\n                    <label>y</label>\n                </div>\n                <!-- groups -->\n                <div\n                    v-if=\"typeof point.members !== 'undefined' && point.members.length\"\n                    v-for=\"(member, i) in point.members\">\n                    <br><strong>cp[{{i}}]</strong><br>\n                    <input type=\"text\" v-model.number=\"member.x\" v-on:change=\"update()\" size=\"3\">\n                    <label>x</label>\n                    <input type=\"text\" v-model.number=\"member.y\" v-on:change=\"update()\" size=\"3\">\n                    <label>.y</label>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'EditPathPoints',\n    props: [\n        'path'\n    ],\n    methods: {\n        update: function () {\n            this.$parent.$emit('edit-path-points:updated');\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <section class=\"mui-form\">\n        <div class=\"mui-checkbox\">\n            <label>\n                <input type=\"checkbox\" v-model=\"show\"> Show {{label}}\n            </label>\n        </div>\n        <pre v-if=\"show\">{{data}}</pre>\n    </section>\n</template>\n\n<script>\nexport default {\n    name: 'Dev',\n    props: ['data', 'label'],\n    data: function () {\n        return {\n            show: false\n        };\n    },\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <!-- nav -->\n        <section>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('circle')\" v-bind:class=\"{active: state.figure == 'circle'}\">Circle</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('free')\"   v-bind:class=\"{active: state.figure == 'free'}\">Open Path</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"(state.figure == 'random') ? init('random') : goTo('random')\" v-bind:class=\"{active: state.figure == 'random'}\">Random</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('star')\" v-bind:class=\"{active: state.figure == 'star'}\">Star</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('flower')\" v-bind:class=\"{active: state.figure == 'flower'}\">Flower</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('seaStar')\" v-bind:class=\"{active: state.figure == 'seaStar'}\">Sea Star</button>\n            <button class=\"mui-btn mui-btn--small app--btn\" v-on:click=\"goTo('triplet')\" v-bind:class=\"{active: state.figure == 'triplet'}\">Triplet</button>\n        </section>\n        <!-- helpers -->\n        <section class=\"mui-form\">\n            <legend>Helpers</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showHandles\" v-on:change=\"init()\"> Handles\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPoints\" v-on:change=\"init()\"> Points\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPath\" v-on:change=\"init()\"> Path\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showBounds\" v-on:change=\"init()\"> Bounding Box\n                </label>\n            </div>\n        </section>\n        <!-- states for figure -->\n        <section class=\"mui-form\">\n            <legend>States</legend>\n\n            <div class=\"mui-textfield\" v-if=\"typeof state[state.figure].tension !== 'undefined'\">\n                <input type=\"range\" v-model.number=\"state[state.figure].tension\" min=\"-2\" max=\"2\" step=\"0.1\" v-on:change=\"init()\">\n                <label>Corner tension <small>({{ state[state.figure].tension }})</small></label>\n            </div>\n\n            <div class=\"mui-textfield\" v-if=\"typeof state[state.figure].segments !== 'undefined'\">\n                <input type=\"range\" v-model.number=\"state[state.figure].segments\" min=\"3\" max=\"20\" v-on:change=\"init()\">\n                <label>Segments <small>({{ state[state.figure].segments }})</small></label>\n            </div>\n\n            <div class=\"mui-textfield\" v-if=\"typeof state[state.figure].outerTension !== 'undefined'\">\n                <input type=\"range\" v-model.number=\"state[state.figure].outerTension\" min=\"0\" max=\"25\" step=\"1\" v-on:change=\"init()\">\n                <label>Outer corner tension <small>({{ state[state.figure].outerTension }})</small></label>\n            </div>\n\n            <div class=\"mui-textfield\" v-if=\"typeof state[state.figure].innerTension !== 'undefined'\">\n                <input type=\"range\" v-model.number=\"state[state.figure].innerTension\" min=\"0\" max=\"5\" step=\"0.1\" v-on:change=\"init()\">\n                <label>Inner corner tension <small>({{ state[state.figure].innerTension }})</small></label>\n            </div>\n        </section>\n        <!-- colors, stroke -->\n        <section class=\"mui-form\">\n            <legend>Appearance</legend>\n\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.stroke.edit\" > Edit Stroke\n                </label>\n            </div>\n\n            <div class=\"mui-panel\" v-if=\"state.stroke.edit\">\n                <div class=\"mui-textfield\">\n                    <input type=\"text\" v-model.number=\"state.canvas.lineWidth\" v-on:change=\"init()\" >\n                    <label>Width</label>\n                </div>\n                <color-picker :targ=\"'strokeStyle'\" :rgba=\"state.canvas.strokeStyle\"></color-picker>\n            </div>\n\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.fill.edit\" > Edit Fill\n                </label>\n            </div>\n\n            <div class=\"mui-panel\" v-if=\"state.fill.edit\">\n                <color-picker :targ=\"'fillStyle'\" :rgba=\"state.canvas.fillStyle\"></color-picker>\n            </div>\n        </section>\n        <!-- edit path points -->\n        <section class=\"mui-form\">\n            <legend>Path</legend>\n\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.path.edit\" > Edit Path\n                </label>\n            </div>\n            <edit-path-points v-if=\"state.path.edit\" :path=\"path\"></edit-path-points>\n        </section>\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Canvas2dHelpers from '../Canvas2dHelpers';\nimport Utils from '../Utils';\n\nimport ColorPicker from '../Form/ColorPicker.vue';\nimport EditPathPoints from '../Form/EditPathPoints.vue';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\n//TODO this can be moved into figure paths\nconst compute = function (path, state) {\n    const figure = state.figure;\n    switch (figure) {\n        case 'flower':\n        case 'seaStar':\n            break;\n        default:\n            Space.Bezier.smoothPath(path, state[figure].tension);\n    }\n    return path;\n};\n\nconst draw = function (path, state, canvas) {\n    canvas.ctx.save();\n    canvas.ctx.strokeStyle = state.canvas.strokeStyle;\n    canvas.ctx.lineWidth = state.canvas.lineWidth;\n    canvas.ctx.fillStyle = state.canvas.fillStyle;\n\n    const length = path.points.length;\n    let prev;\n    let point;\n    let i;\n\n    //// curve\n    canvas.ctx.beginPath();\n    canvas.ctx.moveTo(path.first().x, path.first().y);\n    for (i = 1; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n        Canvas2dHelpers.bezierLine(canvas.ctx, prev, point);\n    }\n    canvas.ctx.fill();\n    canvas.ctx.stroke();\n    canvas.ctx.restore();\n    //// helpers\n\n    for (i = 0; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n\n        if (state.showHandles) {\n            if (point.members !== undefined && point.members.length > 1) {\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[0], i + ':left', 'red');\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[1], i + ':right', 'blue');\n            }\n        }\n        if (state.showPoints) {\n            Canvas2dHelpers.drawPoint(canvas.ctx, point, i + ':point', '#666666');\n        }\n        if (state.showPath) {\n            Canvas2dHelpers.drawLine(canvas.ctx, prev, point, '#666666');\n        }\n        if (state.showBounds) {\n            Canvas2dHelpers.drawBoundingBox(canvas.ctx, path, 'yellow');\n        }\n    }\n    canvas.ctx.restore();\n};\n\n////\n// Figures\n////\n\nconst Figures = {\n    // circle\n    circle: function (state) {\n        const path = new Space.Path(state.origin.x, state.origin.y);\n        path.add(50, 50);\n        path.add(150, 50);\n        path.add(150, 150);\n        path.add(50, 150);\n        path.close();\n        path.scale(1.5, 1.5);\n        return path;\n    },\n\n    star: function (state) {\n        const dim = (state.origin.x < state.origin.y) ? state.origin.x : state.origin.y;\n        const margin = dim * 0.2;\n        const outer = dim - margin;\n        const inner = margin;\n        const figure = new Space.Star(state.star.segments, outer, inner, state.origin);\n        return figure.path;\n    },\n\n    flower: function (state) {\n        const dim = (state.origin.x < state.origin.y) ? state.origin.x : state.origin.y;\n        const margin = dim * 0.2;\n        const outer = dim - margin;\n        const inner = 10;\n        const figure = new Space.Star(state.flower.segments, outer, inner, state.origin);\n        figure.flower(state.flower.outerTension);\n        return figure.path;\n    },\n\n    seaStar: function (state) {\n        const dim = (state.origin.x < state.origin.y) ? state.origin.x : state.origin.y;\n        const margin = dim * 0.2;\n        const outer = dim - margin;\n        const inner = margin;\n        const figure = new Space.Star(state.seaStar.segments, outer, inner, state.origin);\n        figure.seaStar(state.seaStar.innerTension);\n        return figure.path;\n    },\n\n    free: function (state) {\n        const path = new Space.Path();\n        path.points = [\n            new Space.Point.Cartesian(20, 50),\n            new Space.Point.Cartesian(100, 100),\n            new Space.Point.Cartesian(150, 50),\n            new Space.Point.Cartesian(200, 150),\n            new Space.Point.Cartesian(250, 50),\n            new Space.Point.Cartesian(300, 70),\n            new Space.Point.Cartesian(310, 130),\n            new Space.Point.Cartesian(380, 30)\n        ];\n        path.scale(2, 2);\n        path.translate(50, state.origin.y / 2);\n        return path;\n    },\n\n    random: function (state, canvas) {\n        const path = new Space.Path();\n        const segments = Utils.randInt(10, 100);\n        const range = 200;\n        let rand;\n        path.add(new Space.Group(canvas.width / 2, canvas.height / 2));\n        for (let i = 0; i < segments; i += 1) {\n            rand = new Space.Point.Cartesian(\n                Utils.randInt(-range, range) * Utils.randInt(),\n                Utils.randInt(-range, range) * Utils.randInt()\n            );\n            rand.add(path.last());\n            rand.x = Utils.bounds(rand.x, 0, canvas.width);\n            rand.y = Utils.bounds(rand.y, 0, canvas.height);\n            path.add(rand);\n        }\n        return path;\n    },\n\n    triplet: function (state) {\n        const path = new Space.Path(state.origin.x, state.origin.y);\n        path.add(-200, -200);\n        path.progress(100, 200);\n        path.progress(100, -200);\n        return path;\n    }\n};\n\nconst defaults = {\n    strokeStyle: 'rgba(255, 255, 255, 1)',\n    fillStyle: 'transparent', //'rgba(255, 255, 255, 1)',\n    lineWidth: 2\n};\n\nexport default {\n    name: 'BezierPath',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    created: function () {\n        this.$on('color-picker:fillStyle', (val) => {\n            this.state.canvas.fillStyle = val;\n            this.state.fill.edit = false;\n            this.init();\n        });\n        this.$on('color-picker:strokeStyle', (val) => {\n            this.state.canvas.strokeStyle = val;\n            this.state.stroke.edit = false;\n            this.init();\n        });\n        this.$on('edit-path-points:updated', () => {\n            this.update();\n        });\n    },\n    watch: {\n        '$route'(to) {\n            this.state.figure = to.params.figure;\n            this.init();\n        }\n    },\n    data: function () {\n        return {\n            state: {\n                origin: null,\n                canvas: this.appState.factor('canvas', defaults),\n                stroke: {\n                    edit: false\n                },\n                fill: {\n                    edit: false\n                },\n                path: {\n                    edit: false\n                },\n                // helpers\n                showHandles: true,\n                showPoints: true,\n                showPath: false,\n                showBounds: false,\n                figure: (typeof this.$route.params.figure !== 'undefined') ? this.$route.params.figure : 'free',\n                // special states\n                circle: {\n                    tension: 0.5\n                },\n                star: {\n                    segments: 6,\n                    tension: 0.5\n                },\n                flower: {\n                    segments: 6,\n                    outerTension: 15\n                },\n                seaStar: {\n                    segments: 6,\n                    innerTension: 0.5\n                },\n                free: {\n                    tension: 0.5\n                },\n                random: {\n                    tension: 0.5\n                },\n                triplet: {\n                    tension: 0.5\n                }\n            },\n            path: null\n        };\n    },\n    components: {\n        ColorPicker,\n        Dev,\n        EditPathPoints\n    },\n    mounted() {\n        //@TODO cancel animation\n        this.animation.only(() => {}).cancel(); // !!!!!\n        this.init();\n    },\n    methods: {\n\n        // compute path and draw\n        init: function (figure) {\n            if (figure !== undefined) {\n                this.state.figure = figure;\n            }\n            let timeout = null;\n            this.canvas.clear();\n\n            //@TODO\n            timeout = window.setTimeout(() => {\n                // !in timeout\n                if (!this.state.origin) {\n                    this.state.origin = new Space.Point.Cartesian(this.canvas.canvas.width / 2, this.canvas.canvas.height / 2);\n                }\n                this.path = Figures[this.state.figure](this.state, this.canvas.canvas);\n\n                compute(this.path, this.state, this.canvas.canvas);\n                draw(this.path, this.state, this.canvas);\n                window.clearTimeout(timeout);\n            }, 100);\n        },\n\n        // draws from state path\n        update: function () {\n            let timeout = null;\n            this.canvas.clear();\n\n            //@TODO\n            timeout = window.setTimeout(() => {\n                draw(this.path, this.state, this.canvas);\n                window.clearTimeout(timeout);\n            }, 100);\n        },\n\n        goTo(figure) {\n            this.$router.push({ name: this.$route.name, params: { figure: figure } });\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section>\n            <div class=\"mui-dropdown\">\n                <button class=\"mui-btn mui-btn-small\" data-mui-toggle=\"dropdown\">\n                    {{ (figure) ? figure : 'Choose' }}\n                    <span class=\"mui-caret mui--text-accent\"></span>\n                </button>\n                <ul class=\"mui-dropdown__menu\">\n                    <li\n                        v-for=\"fig in figures\"\n                        v-if=\"fig.name !== figure\"\n                        v-bind:class=\"{'router-link-active': fig.name === figure}\"\n                    >\n                        <a v-on:click=\"goTo(fig)\">{{ fig.name }}</a>\n                    </li>\n                </ul>\n            </div>\n        </section>\n\n        <!-- helpers -->\n        <section class=\"mui-form\">\n            <legend>Helpers</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPoints\" v-on:change=\"init()\"> Points\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPath\" v-on:change=\"init()\"> Path\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showBounds\" v-on:change=\"init()\"> Bounding Box\n                </label>\n            </div>\n        </section>\n\n        <!-- figure:path -->\n        <section class=\"mui-form--inline\" v-if=\"figure === 'Path'\">\n            <div class=\"app--inline-field mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Path.segments\" v-on:change=\"init()\" >\n                <label>Segments <small>({{ state.Path.segments }})</small></label>\n            </div>\n        </section>\n\n        <!-- figure:polygon -->\n        <section class=\"mui-form--inline\" v-if=\"figure === 'Polygon'\">\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Polygon.segments\" v-on:change=\"init()\" >\n                <label>Segments</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Polygon.radius\" v-on:change=\"init()\" >\n                <label>Radius</label>\n            </div>\n        </section>\n\n        <!-- figure:star -->\n        <section class=\"mui-form--inline\" v-if=\"figure === 'Star'\">\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Star.segments\" v-on:change=\"init()\" >\n                <label>Segments</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Star.outerRadius\" v-on:change=\"init()\" >\n                <label>outer Radius</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Star.innerRadius\" v-on:change=\"init()\" >\n                <label>inner Radius</label>\n            </div>\n        </section>\n\n        <!-- figure:cog -->\n        <section class=\"mui-form--inline\" v-if=\"figure === 'Cog'\">\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Cog.segments\" v-on:change=\"init()\" >\n                <label>Segments</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Cog.outerRadius\" v-on:change=\"init()\" >\n                <label>outer Radius</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Cog.innerRadius\" v-on:change=\"init()\" >\n                <label>inner Radius</label>\n            </div>\n        </section>\n\n        <!-- figure:rectangle -->\n        <section class=\"mui-form--inline\"  v-if=\"figure === 'Rectangle'\">\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Rectangle.width\" v-on:change=\"init()\" >\n                <label>Width</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.Rectangle.height\" v-on:change=\"init()\" >\n                <label>Height</label>\n            </div>\n        </section>\n\n        <!-- colors, stroke -->\n        <section class=\"mui-form--inline\" v-if=\"state.fill.form\">\n            <legend>Background</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.fill.show\" v-on:change=\"init()\"> Show\n                </label>\n            </div>\n            <div class=\"mui-checkbox\" v-if=\"state.fill.show\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.fill.edit\" > Edit\n                </label>\n            </div>\n            <div v-if=\"state.fill.edit\">\n                <color-picker :targ=\"'fillStyle'\" :rgba=\"state.canvas.fillStyle\"></color-picker>\n            </div>\n        </section>\n\n        <!-- colors, stroke -->\n        <section class=\"mui-form--inline\">\n            <legend>Stroke</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.stroke.show\" v-on:change=\"init()\"> Show\n                </label>\n            </div>\n            <div class=\"mui-checkbox\" v-if=\"state.stroke.show\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.stroke.edit\" > Edit\n                </label>\n            </div>\n\n            <div v-if=\"state.stroke.edit\">\n                <div  class=\"mui-panel\">\n                    <div class=\"mui-textfield\">\n                        <input type=\"text\" v-model.number=\"state.canvas.lineWidth\" v-on:change=\"init()\" >\n                        <label>Width</label>\n                    </div>\n                </div>\n                <color-picker :targ=\"'strokeStyle'\" :rgba=\"state.canvas.strokeStyle\"></color-picker>\n            </div>\n        </section>\n\n        <!-- translate -->\n        <section class=\"mui-form--inline\">\n            <legend>Translate</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.tanslate[0]\" v-on:change=\"init()\" >\n                <label>X</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.tanslate[1]\" v-on:change=\"init()\" >\n                <label>Y</label>\n            </div>\n        </section>\n\n        <!-- scale-->\n        <section class=\"mui-form--inline\">\n            <legend>Scale</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.scale[0]\" v-on:change=\"init()\" >\n                <label>X</label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.scale[1]\" v-on:change=\"init()\" >\n                <label>Y</label>\n            </div>\n        </section>\n\n        <!-- rotate-->\n        <section class=\"mui-form--inline\">\n            <legend>Rotate</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"text\" v-model.number=\"state.rotate2D\" v-on:change=\"init()\" >\n                <label>rad</label>\n            </div>\n        </section>\n\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Canvas2dHelpers from '../Canvas2dHelpers';\nimport Utils from '../Utils';\nimport Routes from '../Routes';\nimport ColorPicker from '../Form/ColorPicker.vue';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (figure, state, canvas) {\n\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n\n    let fig;\n    let segments;\n\n    switch (figure) {\n\n        case 'Path': {\n            const margin = 100;\n            segments = state.Path.segments;\n            const x = (canvas.width - (2 * margin)) / segments;\n            let y = canvas.height - (2 * margin);\n            fig = new Space.Path();\n            fig.add(margin, margin);\n            while (segments > 0) {\n                fig.progress(x, y);\n                y = -y;\n                segments -= 1;\n            }\n            break;\n        }\n\n        case 'Polygon': {\n            fig = new Space.Polygon(state.Polygon.segments, state.Polygon.radius, state.origin);\n            break;\n        }\n\n        case 'Rectangle': {\n            fig = new Space.Rectangle(state.Rectangle.width, state.Rectangle.height, state.origin);\n            break;\n        }\n\n        case 'Star': {\n            fig = new Space.Star(state.Star.segments, state.Star.outerRadius, state.Star.innerRadius, state.origin);\n            break;\n        }\n\n        case 'Cog': {\n            fig = new Space.Cog(state.Cog.segments, state.Cog.outerRadius, state.Cog.innerRadius, state.origin);\n            break;\n        }\n\n        default: {\n            fig = null;\n        }\n\n    }\n\n    //Figure or only Path\n    const path = (typeof fig.path !== 'undefined') ? fig.path : fig;\n\n    // translate\n    const hasTranslate = state.tanslate.reduce((a, b) => {\n        return a + b;\n    });\n\n    if (hasTranslate) {\n        path.translate(state.tanslate[0], state.tanslate[1]);\n    }\n\n    // translate\n    const hasScale = state.scale.reduce((a, b) => {\n        return a * b;\n    });\n\n    // scale\n    if (hasScale !== 1) {\n        path.scale(state.scale[0], state.scale[1]);\n    }\n\n    // rotate 2d\n    if (state.rotate2D) {\n        path.rotate2D(Utils.radians(state.rotate2D));\n    }\n\n    return path;\n\n};\n\nconst draw = function (figure, path, state, canvas) {\n    canvas.ctx.save();\n    // styles\n    canvas.ctx.fillStyle = (state.fill.show && figure !== 'Path') ? state.canvas.fillStyle : 'transparent';\n    canvas.ctx.strokeStyle = state.canvas.strokeStyle;\n    canvas.ctx.lineWidth = state.canvas.lineWidth;\n\n    // path\n    canvas.ctx.beginPath();\n    canvas.ctx.moveTo(path.first().x, path.first().y);\n    path.points.forEach((point, index) => {\n        if (index === 0) {\n            return;\n        }\n        canvas.ctx.lineTo(point.x, point.y);\n    });\n\n    // draw\n    if (state.canvas.fillStyle) {\n        canvas.ctx.fill();\n    }\n    canvas.ctx.stroke();\n\n    // finish\n    canvas.ctx.closePath();\n    canvas.ctx.restore();\n\n    //// helpers\n    const length = path.points.length;\n    let prev;\n    let point;\n    let i;\n\n    for (i = 0; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n\n        if (state.showPoints) {\n            Canvas2dHelpers.drawPoint(canvas.ctx, point, i + ':point', 'orange');\n        }\n        if (state.showPath) {\n            Canvas2dHelpers.drawLine(canvas.ctx, prev, point, '#666666');\n        }\n        if (state.showBounds) {\n            Canvas2dHelpers.drawBoundingBox(canvas.ctx, path, 'yellow');\n        }\n    }\n};\n\nconst defaults = {\n    strokeStyle: 'rgba(255, 255, 255, 1)',\n    fillStyle: 'rgba(255, 255, 255, 1)',\n    lineWidth: 2\n};\n\nexport default {\n    name: 'Figures',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    watch: {\n        '$route'(to) {\n            this.figure = to.params.figure;\n            this.state.canvas = this.appState.factor('canvas', defaults);\n            this.init();\n        }\n    },\n    created: function () {\n        this.$on('color-picker:fillStyle', (val) => {\n            this.state.canvas.fillStyle = val;\n            this.state.fill.edit = false;\n            this.init();\n        });\n        this.$on('color-picker:strokeStyle', (val) => {\n            this.state.canvas.strokeStyle = val;\n            this.state.stroke.edit = false;\n            this.init();\n        });\n    },\n    data: function () {\n        return {\n            state: {\n                origin: null,\n                canvas: this.appState.factor('canvas', defaults),\n                // form\n                fill: {\n                    form: true,\n                    show: true,\n                    edit: false\n                },\n                stroke: {\n                    show: true,\n                    edit: false\n                },\n                // transform\n                tanslate: [0, 0],\n                scale: [1, 1],\n                rotate2D: 0,\n                // helpers\n                showPoints: false,\n                showPath: false,\n                showBounds: false,\n                // form defaults per figure\n                Path: {\n                    segments: 25\n                },\n                Polygon: {\n                    segments: 6,\n                    radius: 200\n                },\n                Star: {\n                    segments: 5,\n                    outerRadius: 200,\n                    innerRadius: 70\n                },\n                Cog: {\n                    segments: 5,\n                    outerRadius: 200,\n                    innerRadius: 125\n                },\n                Rectangle: {\n                    width: 300,\n                    height: 200\n                }\n            },\n            figures: Routes.figures(),\n            figure: (typeof this.$route.params.figure !== 'undefined') ? this.$route.params.figure : 'Path'\n        };\n    },\n    components: {\n        ColorPicker,\n        Dev\n    },\n    mounted() {\n        //@TODO cancel animation\n        this.animation.only(() => {}).cancel(); // !!!!!\n        this.init();\n    },\n    methods: {\n        init: function () {\n            let timeout = null;\n            this.canvas.clear();\n            this.initForms();\n            //@TODO\n            timeout = window.setTimeout(() => {\n                const path = compute(this.figure, this.state, this.canvas.canvas);\n                draw(this.figure, path, this.state, this.canvas);\n                window.clearTimeout(timeout);\n            }, 100);\n        },\n        initForms: function () {\n            this.state.fill.form = (this.figure !== 'Path');\n        },\n        goTo(figure) {\n            this.$router.push({ name: this.$route.name, params: { figure: figure.name } });\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segments\" min=\"10\" max=\"800\" step=\"10\">\n                <label>Segments <small>({{ state.segments }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.prev) {\n        state.prev = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n    const path = new Space.Path();\n    const range = state.segmentsRange;\n    let count = 0;\n    let rand;\n    path.add(state.prev);\n    while (count < state.segments) {\n        rand = new Space.Point.Cartesian(\n            Utils.randInt(-range, range) * Utils.randInt(),\n            Utils.randInt(-range, range) * Utils.randInt()\n        );\n        rand.add(path.last());\n        rand.x = Utils.bounds(rand.x, 0, canvas.width);\n        rand.y = Utils.bounds(rand.y, 0, canvas.height);\n        path.add(rand);\n        count += 1;\n    }\n\n    state.prev = path.last();\n    return path;\n};\n\nexport default {\n    name: 'Path',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: null,\n                segments: 200,\n                segmentsRange: 10,\n                canvas: this.appState.factor('canvas')\n            }\n        };\n    },\n    mounted() {\n        let path;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            path = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(path.first().x, path.first().y);\n            path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n                // draw\n                this.canvas.ctx.stroke();\n            });\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.radiusRange\" min=\"5\" max=\"500\">\n                <label>Radius Range <small>({{ state.radiusRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n    let radius = Math.floor(Utils.randInt(5, state.radiusRange));\n    let segments = Math.floor(Utils.randInt(3, state.segmentsRange));\n    segments = Utils.bounds(segments, false, 25);\n    radius = Utils.bounds(radius, false, canvas.width / 2);\n\n    state.prev.segments = segments;\n    state.prev.radius = radius;\n\n    return new Space.Polygon(segments, radius, state.origin);\n};\n\nexport default {\n    name: 'Polygon',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    segments: 3,\n                    radius: 50\n                },\n                segmentsRange: 10,\n                radiusRange: 200,\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(99, 9, 9, .8)'\n                })\n            }\n        };\n    },\n    mounted() {\n        let polygon;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.fillStyle = this.state.canvas.fillStyle;\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n            polygon.path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n            });\n\n            // draw\n            if (this.state.canvas.fillStyle) {\n                this.canvas.ctx.fill();\n            }\n            this.canvas.ctx.stroke();\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.widthRange\" min=\"5\" max=\"1000\">\n                <label>Width Range <small>({{ state.widthRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.heightRange\" min=\"5\" max=\"1000\">\n                <label>Height Range <small>({{ state.heightRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n    const width = Math.floor(Utils.randInt(5, state.widthRange));\n    const height = Math.floor(Utils.randInt(3, state.heightRange));\n\n    state.prev.width = width;\n    state.prev.height = height;\n\n    return new Space.Rectangle(width, height, state.origin);\n};\n\nexport default {\n    name: 'Rectangle',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    width: 25,\n                    height: 50\n                },\n                widthRange: 500,\n                heightRange: 500,\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(255, 255, 255, .2)'\n                })\n            }\n        };\n    },\n    mounted() {\n        let polygon;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.fillStyle = this.state.canvas.fillStyle;\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n            polygon.path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n            });\n\n            // draw\n            if (this.state.canvas.fillStyle) {\n                this.canvas.ctx.fill();\n            }\n            this.canvas.ctx.stroke();\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.outerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Outer Radius Range <small>({{ state.outerRadiusRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.innerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Inner Radius Range <small>({{ state.innerRadiusRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n\n    let outerRadius = Math.floor(Utils.randInt(5, state.outerRadiusRange));\n    let innerRadius = Math.floor(Utils.randInt(5, state.innerRadiusRange));\n    let segments = Math.floor(Utils.randInt(3, state.segmentsRange));\n    segments = Utils.bounds(segments, false, 25);\n    outerRadius = Utils.bounds(outerRadius, false, canvas.width / 2);\n    innerRadius = Utils.bounds(innerRadius, false, canvas.width / 2);\n\n    state.prev.segments = segments;\n    state.prev.outerRadius = outerRadius;\n    state.prev.innerRadius = innerRadius;\n\n    return new Space.Star(segments, outerRadius, innerRadius, state.origin);\n};\n\nexport default {\n    name: 'Star',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    segments: 3,\n                    outerRadius: 50,\n                    innerRadius: 10\n                },\n                segmentsRange: 10,\n                outerRadiusRange: 200,\n                innerRadiusRange: 200,\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(0, 99, 0, .6)'\n                })\n            }\n        };\n    },\n    mounted() {\n        let polygon;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.fillStyle = this.state.canvas.fillStyle;\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n            polygon.path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n            });\n\n            // draw\n            if (this.state.canvas.fillStyle) {\n                this.canvas.ctx.fill();\n            }\n            this.canvas.ctx.stroke();\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.outerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Outer Radius Range <small>({{ state.outerRadiusRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.innerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Inner Radius Range <small>({{ state.innerRadiusRange }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    if (!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width / 2, canvas.height / 2);\n    }\n\n    let outerRadius = Math.floor(Utils.randInt(5, state.outerRadiusRange));\n    let innerRadius = Math.floor(Utils.randInt(5, state.innerRadiusRange));\n    let segments = Math.floor(Utils.randInt(3, state.segmentsRange));\n    segments = Utils.bounds(segments, false, 25);\n    outerRadius = Utils.bounds(outerRadius, false, canvas.width / 2);\n    innerRadius = Utils.bounds(innerRadius, false, canvas.width / 2);\n\n    state.prev.segments = segments;\n    state.prev.outerRadius = outerRadius;\n    state.prev.innerRadius = innerRadius;\n\n    return new Space.Cog(segments, outerRadius, innerRadius, state.origin);\n};\n\nexport default {\n    name: 'Star',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    segments: 3,\n                    outerRadius: 50,\n                    innerRadius: 10\n                },\n                segmentsRange: 10,\n                outerRadiusRange: 200,\n                innerRadiusRange: 200,\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'rgba(255, 255, 255, 1)',\n                    fillStyle: 'rgba(0, 99, 0, .6)'\n                })\n            }\n        };\n    },\n    mounted() {\n        let polygon;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.fillStyle = this.state.canvas.fillStyle;\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            // path\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n            polygon.path.points.forEach((point, index) => {\n                if (index === 0) {\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n            });\n\n            // draw\n            if (this.state.canvas.fillStyle) {\n                this.canvas.ctx.fill();\n            }\n            this.canvas.ctx.stroke();\n\n            // finish\n            this.canvas.ctx.closePath();\n            this.canvas.ctx.restore();\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segments\" min=\"3\" max=\"60\" step=\"1\">\n                <label>Segments <small>({{ state.segments }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"0\" max=\"1\" step=\"0.1\">\n                <label>Segments range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.tension\" min=\"-2\" max=\"2\" step=\"0.1\">\n                <label>Corner tension <small>({{ state.tension }})</small></label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\nimport Dev from '../Form/Dev.vue';\nimport Canvas2dHelpers from '../Canvas2dHelpers';\n\nconst Space = window.Space;\n\nconst compute = function (state, canvas) {\n    const path = new Space.Path();\n    const phi = (Math.PI * 2) / state.segments;\n    const maxR = (canvas.width < canvas.height) ? (canvas.width / 3) : (canvas.height / 3);\n    const minR = maxR * state.segmentsRange;\n    let r;\n    let p;\n    for (let i = 0; i < state.segments; i += 1) {\n        r = Utils.randInt(minR, maxR);\n        p = new Space.Point.Polar(r, i * phi);\n        path.add(new Space.Group(p.x(), p.y()));\n    }\n    path.close();\n    path.translate(canvas.width / 2, canvas.height / 2);\n    Space.Bezier.smoothPath(path, state.tension);\n    return path;\n};\n\nexport default {\n    name: 'Path',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    components: {\n        Dev\n    },\n    data: function () {\n        return {\n            state: {\n                segments: 10,\n                segmentsRange: 0.3,\n                canvas: this.appState.factor('canvas', {\n                    lineWidth: 0.5\n                }),\n                tension: 0.5\n            }\n        };\n    },\n    mounted() {\n        let path;\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            path = compute(this.state, this.canvas.canvas);\n\n            // init\n            this.canvas.fill();\n            this.canvas.ctx.save();\n\n            // styles\n            this.canvas.ctx.strokeStyle = this.state.canvas.strokeStyle;\n            this.canvas.ctx.lineWidth = this.state.canvas.lineWidth;\n\n            //// curve\n            const length = path.points.length;\n            let prev;\n            let point;\n            let i;\n\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(path.first().x, path.first().y);\n            for (i = 1; i < length; i += 1) {\n                prev = path.prev(i);\n                point = path.get(i);\n                Canvas2dHelpers.bezierLine(this.canvas.ctx, prev, point);\n            }\n            this.canvas.ctx.fill();\n            this.canvas.ctx.stroke();\n        })\n        .play()\n        ;\n    }\n};\n\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n\n        <section>\n            <!-- figures.src -->\n            <div class=\"mui-dropdown\">\n                <button class=\"mui-btn mui-btn-small\" data-mui-toggle=\"dropdown\">\n                    {{ (figures.src) ? figures.src : 'Choose' }}\n                    <span class=\"mui-caret mui--text-accent\"></span>\n                </button>\n                <ul class=\"mui-dropdown__menu\">\n                    <li\n                        v-for=\"fig in figures.available\"\n                        v-bind:class=\"{'router-link-active': fig === figures.src}\"\n                    >\n                        <a v-on:click=\"goTo(fig, figures.targ)\">{{ fig }}</a>\n                    </li>\n                </ul>\n            </div>\n            <span>&nbsp;to&nbsp;</span>\n            <!-- figures.targ -->\n            <div class=\"mui-dropdown\">\n                <button class=\"mui-btn mui-btn-small\" data-mui-toggle=\"dropdown\">\n                    {{ (figures.targ) ? figures.targ : 'Choose' }}\n                    <span class=\"mui-caret mui--text-accent\"></span>\n                </button>\n                <ul class=\"mui-dropdown__menu\">\n                    <li\n                        v-for=\"fig in figures.available\"\n                        v-bind:class=\"{'router-link-active': fig === figures.targ}\"\n                    >\n                        <a v-on:click=\"goTo(figures.src, fig)\">{{ fig }}</a>\n                    </li>\n                </ul>\n            </div>\n        </section>\n\n        <!-- morphing -->\n        <section class=\"mui-form\">\n            <legend>Morphing</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.continuous\">\n                    Continuous\n                </label>\n            </div>\n        </section>\n\n        <!-- params -->\n        <section class=\"mui-form\">\n            <legend>Edit Params</legend>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.steps\" min=\"10\" max=\"300\" step=\"10\">\n                <label>Steps <small>( {{(morpher) ? morpher.count : 0}} of {{ state.steps }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segments\" min=\"3\" max=\"150\">\n                <label>Segment Range <small>({{ state.segments }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <button class=\"mui-btn mui-btn--small mui-btn--primary\" v-on:click=\"create()\">Create Morpher</button>\n            </div>\n        </section>\n\n        <!-- helpers -->\n        <section class=\"mui-form\">\n            <legend>Helpers</legend>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showHandles\" v-on:change=\"init()\"> Handles\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPoints\" v-on:change=\"init()\"> Points\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showPath\" v-on:change=\"init()\"> Path\n                </label>\n            </div>\n            <div class=\"mui-checkbox\">\n                <label>\n                    <input type=\"checkbox\" v-model=\"state.showBounds\" v-on:change=\"init()\"> Bounding Box\n                </label>\n            </div>\n        </section>\n\n        <!-- devel -->\n        <dev :label=\"'State'\" :data=\"state\"></dev>\n    </div>\n</template>\n\n<script>\nimport Canvas2dHelpers from '../Canvas2dHelpers';\nimport Dev from '../Form/Dev.vue';\nimport Utils from '../Utils';\n\nconst Space = window.Space;\n\nlet paused; //holds timeout\n\nconst radius = function (canvas, margin) {\n    margin = margin || 50;\n    return (canvas.width < canvas.height) ? (canvas.width / 2) - margin : (canvas.height / 2) - 50;\n};\n\nconst Figures = {\n\n    available: ['Line', 'Polygon', 'Star', 'Cog', 'Flower', 'Random'],\n\n    create: function (type, state, canvas) {\n\n        //TODO\n        let figure;\n        let segments;\n\n        switch (type) {\n            case 'Line': {\n                segments = state.segments;\n                const from = new Space.Point.Cartesian(0, canvas.height / 2);\n                const to = new Space.Point.Cartesian(canvas.width, canvas.height / 2);\n                figure = new Space.Line(from, to, segments); //TODO solve -1 inside morpher or line.segmentize\n                break;\n            }\n            case 'Polygon': {\n                segments = state.segments;\n                figure = new Space.Polygon(segments, radius(canvas), state.origin);\n                break;\n            }\n            case 'Star': {\n                segments = state.segments / 2;\n                figure = new Space.Star(segments, radius(canvas), 50, state.origin);\n                break;\n            }\n            case 'Cog': {\n                segments = state.segments / 4;\n                figure = new Space.Cog(segments, radius(canvas), 50, state.origin);\n                break;\n            }\n            case 'Flower': {\n                segments = state.segments / 2;\n                figure = new Space.Star(segments, radius(canvas), 50, state.origin);\n                figure.flower(0.5);\n                break;\n            }\n            case 'Random': {\n                segments = state.segments;\n                const path = new Space.Path();\n                const range = 200;\n                let rand;\n\n                path.add(new Space.Group(canvas.width / 2, canvas.height / 2));\n                for (let i = 0; i < segments; i += 1) {\n                    rand = new Space.Point.Cartesian(\n                        Utils.randInt(-range, range) * Utils.randInt(),\n                        Utils.randInt(-range, range) * Utils.randInt()\n                    );\n                    rand.add(path.last());\n                    rand.x = Utils.bounds(rand.x, 0, canvas.width);\n                    rand.y = Utils.bounds(rand.y, 0, canvas.height);\n                    path.add(rand);\n                }\n                path.close();\n                Space.Bezier.smoothPath(path, 0.5);\n                figure = { path: path }; //TODO\n                break;\n            }\n            default:\n                // nothing\n        }\n        return figure;\n    }\n\n};\n\nconst compute = function (morpher, state) {\n\n    const finished = morpher.finished();\n\n    if (finished && !state.continuous) {\n        return;\n    }\n\n    if (finished) {\n        state.continuous = false;\n\n        paused = setTimeout(() => {\n            morpher.reverse();\n            state.continuous = true;\n\n            clearTimeout(paused);\n        }, 1000);\n\n        return;\n    }\n\n    morpher.progress();\n};\n\nconst draw = function (path, state, canvas) {\n    //canvas.clear();\n\n    canvas.ctx.save();\n    canvas.ctx.strokeStyle = state.canvas.strokeStyle;\n    canvas.ctx.lineWidth = state.canvas.lineWidth;\n    canvas.ctx.fillStyle = state.canvas.fillStyle;\n\n    const length = path.points.length;\n    let prev;\n    let point;\n    let i;\n\n    //// curve\n    canvas.ctx.beginPath();\n    canvas.ctx.moveTo(path.first().x, path.first().y);\n    for (i = 1; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n        Canvas2dHelpers.bezierLine(canvas.ctx, prev, point);\n    }\n    canvas.ctx.fill();\n    canvas.ctx.stroke();\n    canvas.ctx.restore();\n    //// helpers\n\n    for (i = 0; i < length; i += 1) {\n        prev = path.prev(i);\n        point = path.get(i);\n\n        if (state.showHandles) {\n            if (point.members !== undefined && point.members.length > 1) {\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[0], i + ':left', 'red');\n                Canvas2dHelpers.drawHandle(canvas.ctx, point, point.members[1], i + ':right', 'blue');\n            }\n        }\n\n        if (state.showPoints) {\n            Canvas2dHelpers.drawPoint(canvas.ctx, point, i + ':point', '#666666');\n        }\n        if (state.showPath) {\n            Canvas2dHelpers.drawLine(canvas.ctx, prev, point, '#666666');\n        }\n        if (state.showBounds) {\n            Canvas2dHelpers.drawBoundingBox(canvas.ctx, path, 'yellow');\n        }\n    }\n    canvas.ctx.restore();\n};\n\nexport default {\n    name: 'Home',\n    props: [\n        'animation',\n        'appState',\n        'canvas'\n    ],\n    data: function () {\n        return {\n            state: {\n                prev: {\n                    figures: {}\n                },\n                origin: null,\n                canvas: this.appState.factor('canvas', {\n                    strokeStyle: 'white',\n                    lineWidth: 1\n                }),\n                segments: 12,\n                steps: 100,\n                //behaviour\n                continuous: true\n            },\n            path: null,\n            figures: {\n                src: (typeof this.$route.params.src !== 'undefined') ? this.$route.params.src : 'Polygon',\n                targ: (typeof this.$route.params.targ !== 'undefined') ? this.$route.params.targ : 'Star',\n                available: Figures.available\n            },\n            morpher: null,\n\n        };\n    },\n    methods: {\n        init: function () {\n            this.state.origin = new Space.Point.Cartesian(this.canvas.canvas.width / 2, this.canvas.canvas.height / 2);\n        },\n        create: function () {\n            if (Figures.available.indexOf(this.figures.src) === -1) {\n                throw new Error('Morpher component: Source figure of type \"' + this.figures.src + '\" not recognized.');\n            }\n            if (Figures.available.indexOf(this.figures.targ) === -1) {\n                throw new Error('Morpher component: Target figure of type \"' + this.figures.targ + '\" not recognized.');\n            }\n\n            const targFigure = Figures.create(this.figures.targ, this.state, this.canvas.canvas);\n            const srcFigure = Figures.create(this.figures.src, this.state, this.canvas.canvas);\n            this.path = srcFigure.path;\n            this.morpher = new Space.Morpher(srcFigure.path, targFigure.path, this.state.steps);\n        },\n        goTo(src, targ) {\n            this.$router.push({\n                name: this.$route.name,\n                params: {\n                    src: src,\n                    targ: targ\n                }\n            });\n        }\n    },\n    components: {\n        Dev\n    },\n    watch: {\n        '$route'(to) {\n            this.figures.src = to.params.src;\n            this.figures.targ = to.params.targ;\n            this.create();\n        }\n    },\n    mounted() {\n        this.canvas.fill();\n        this.animation\n        //.fps(32)\n        .only(() => {\n            if (!this.state.origin) {\n                this.init();\n                this.create();\n                return;\n            }\n\n            compute(this.morpher, this.state);\n            draw(this.morpher.src, this.state, this.canvas);\n            // init\n            this.canvas.fill();\n\n        })\n        .play()\n        ;\n    }\n};\n</script>\n\n<style>\n</style>\n","// landing views\nimport Home from './Home.vue';\nimport BezierPath from './Figures/BezierPath.vue';\nimport Figures from './Figures/Figures.vue';\n// single views\nimport Path from './Paths/Path.vue';\nimport Polygon from './Paths/Polygon.vue';\nimport Rectangle from './Paths/Rectangle.vue';\nimport Star from './Paths/Star.vue';\nimport Cog from './Paths/Cog.vue';\nimport Bezier from './BezierPaths/Bezier.vue';\nimport Morpher from './Morphing/Morpher.vue';\n\nconst routes = [\n    {\n        name: '',\n        path: '/',\n        component: Path,\n        meta: {\n            menu: false,\n            figure: false\n        }\n    },\n    {\n        name: 'Home',\n        path: '/Home',\n        component: Home,\n        meta: {\n            menu: false,\n            figure: false\n        }\n    },\n    {\n        name: 'Path',\n        path: '/Path',\n        component: Path,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Polygon',\n        path: '/Polygon',\n        component: Polygon,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Rectangle',\n        path: '/Rectangle',\n        component: Rectangle,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Star',\n        path: '/Star',\n        component: Star,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Cog',\n        path: '/Cog',\n        component: Cog,\n        meta: {\n            menu: true,\n            figure: true\n        }\n    },\n    {\n        name: 'Bezier',\n        path: '/Bezier',\n        component: Bezier,\n        meta: {\n            menu: true,\n            figure: false\n        }\n    },\n    {\n        name: 'Figures',\n        path: '/Figures/:figure?',\n        component: Figures,\n        meta: {\n            menu: true,\n            figure: false\n        }\n    },\n    {\n        name: 'BezierPaths',\n        path: '/BezierPath/:figure?',\n        component: BezierPath,\n        meta: {\n            menu: true,\n            figure: false\n        }\n    },\n    {\n        name: 'Morph',\n        path: '/Morph/:src?/:targ?',\n        component: Morpher,\n        meta: {\n            menu: true,\n            figure: false\n        }\n    },\n    // catch all redirect\n    {\n        name: '',\n        path: '*',\n        redirect: '/',\n        meta: {\n            menu: false,\n            figure: false\n        }\n    }\n];\n\nconst figures = function () {\n    return routes.filter((item) => {\n        return item.meta.figure;\n    });\n};\n\nconst menu = function () {\n    return routes\n    .filter((item) => {\n        return item.meta.menu;\n    })\n    .map((item) => {\n        return {\n            name: item.name,\n            path: item.path,\n            meta: item.meta || {}\n        };\n    });\n};\n\nconst byName = function (name) {\n    let i;\n    for (i = 1; i < routes.length; i += 1) {\n        if (routes[i].name === name) {\n            return routes[i];\n        }\n    }\n    return null;\n};\n\nexport default {\n    routes: routes,\n    figures: figures,\n    menu: menu,\n    byName: byName\n};\n","<template>\n    <div>\n        <section v-if=\"animation.id\" class=\"mui-form\">\n            <legend>Animation <small>{{animation.count}}</small></legend>\n            <a v-on:click=\"animation.toggle()\" class=\"mui-btn mui-btn--small mui-btn--primary\">\n                {{(animation.running) ? 'pause' : 'play'}}\n            </a>\n            <a v-on:click=\"show = !show\" class=\"mui-btn mui-btn--small app--btn\">Throttle</a>\n\n            <div v-if=\"show\" class=\"mui-panel\">\n                <div class=\"mui-textfield\" style=\"\">\n                    <input type=\"range\" v-on:change=\"throttle($event.target.value)\" min=\"0\" max=\"100\">\n                    <label>fps <small>({{1000 / animation.interval}})</small></label>\n                </div>\n            </div>\n        </section>\n\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'Animation',\n    props: ['animation'],\n    data: function () {\n        return {\n            show: false\n        };\n    },\n    methods: {\n        throttle: function (value) {\n            if (value === null) {\n                return;\n            }\n            value = parseInt(value, 10);\n            if (!isNaN(value)) {\n                this.animation.fps(value);\n            }\n        }\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <header id=\"header\">\n            <div class=\"mui-appbar mui--appbar-line-height mui--z1\">\n                <div class=\"mui-container-fluid\">\n                    <table width=\"100%\">\n                        <tr class=\"mui--appbar-height\">\n                            <td>\n                                <span class=\"app--brand\"></span>\n                                <div class=\"mui-dropdown\">\n                                    <button class=\"mui-btn mui-btn-small\" data-mui-toggle=\"dropdown\">\n                                        Space <span class=\"mui--text-accent\">/</span> {{ $route.name }}\n                                        <span class=\"mui-caret mui--text-accent\"></span>\n                                    </button>\n                                    <ul class=\"mui-dropdown__menu\">\n                                        <li\n                                            v-for=\"route in routes\"\n                                            v-if=\"route.name\"\n                                            v-bind:class=\"{'router-link-active': $route.name === route.name}\"\n                                        >\n                                            <a v-on:click=\"goTo(route)\">{{ route.name }}</a>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </td>\n                            <td>\n                                <a class=\"app--sidebar-trigger mui--pull-right mui--text-display1\" v-on:click=\"toggle()\"><i class=\"zmdi zmdi-settings\"></i></a>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n        </header>\n\n        <footer id=\"footer\">\n            <div class=\"app--footer-content mui-container-fluid mui--align-middle\">\n                Demo made with <a href=\"https://vuejs.org/\">Vue</a> & <a href=\"https://www.muicss.com\">MUI</a>\n            </div>\n        </footer>\n\n        <aside id=\"sidebar\" class=\"mui-panel\" v-bind:class=\"{'visible': sidebar}\">\n\n            <div v-if=\"$route.name\" class=\"mui--appbar-line-height\">\n                <span class=\"mui--text-title\">{{ $route.name }}</span>\n            </div>\n            <div class=\"mui-divider\"></div>\n\n            <animation :animation=\"animation\"></animation>\n\n           <router-view class=\"view\"\n               :app-state=\"appState\"\n               :animation=\"animation\"\n               :canvas=\"canvas\"\n           ></router-view>\n\n       </aside>\n\n        <main id=\"content\" class=\"mui-container-fluid\">\n            <div class=\"mui-row\">\n                <div class=\"mui-col-md-12 app--canvas\"></div>\n            </div>\n        </main>\n    </div>\n</template>\n\n<script>\nimport Animation from './Form/Animation.vue';\n\nexport default {\n    name: 'app',\n    props: ['animation', 'appState', 'canvas', 'routes'],\n    components: {\n        Animation\n    },\n    mounted() {\n        this.sidebar = document.getElementById('sidebar');\n\n        this.$el.querySelector('.app--canvas').appendChild(this.canvas.canvas);\n        this.canvas.canvas.width = document.body.clientWidth;\n        this.canvas.canvas.height = document.body.clientHeight;\n        this.canvas.ctx.fillStyle = this.appState.canvas.fillStyle;\n        this.canvas.ctx.lineWidth = this.appState.canvas.lineWidth;\n    },\n    methods: {\n        goTo: function (route) {\n            const to = (route.path.indexOf('/:') > -1) ? { name: route.name, params: {} } : route.path;\n            this.$router.push(to);\n        },\n        toggle: function () {\n            if (!this.sidebar) {\n                return;\n            }\n            let right = (this.sidebar.style.right) ? this.sidebar.style.right : window.getComputedStyle(this.sidebar).getPropertyValue('right');\n            right = parseInt(right, 10);\n            this.sidebar.style.right = ((right < 0) ? 0 : -this.sidebar.clientWidth) + 'px';\n        }\n    },\n    data: function () {\n        return {\n            sidebar: null\n        };\n    }\n};\n</script>\n\n<style>\n</style>\n","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n\n// rollup-plugin-scss\nimport './main.scss';\n\nimport Animation from './Animation';\nimport Canvas2d from './Canvas2d';\nimport State from './State';\nimport Routes from './Routes';\n\nimport App from './App.vue';\n\nconst animation = new Animation();\nconst canvas = new Canvas2d();\n\n// Create the router\nconst router = new VueRouter({\n    mode: 'hash', //'history',\n    routes: Routes.routes\n});\n\n// 4. Create and mount root instance.\n// Make sure to inject the router.\nnew Vue({\n    router,\n    data: {\n        animation,\n        appState: State,\n        canvas,\n        routes: Routes.menu()\n    },\n    components: {\n        App\n    },\n    //render: h => h(App)\n    template: '<App :app-state=\"appState\" :animation=\"animation\" :canvas=\"canvas\" :routes=\"routes\"/>',\n}).$mount('#app');\n"],"names":["Animation","id","count","running","interval","last","Date","getTime","callbacks","prototype","fps","add","callback","push","clear","splice","length","only","play","now","delta","forEach","fn","window","requestAnimationFrame","stop","pause","cancel","cancelAnimationFrame","toggle","document","CLASS_NAME","Canvas2d","canvas","createElement","className","ctx","getContext","styles","keys","key","clearRect","width","height","fill","fillRect","State","property","merge","min","max","Math","random","val","base","range","bounce","randInt","deg","PI","Helpers","from","to","theme","save","fillStyle","strokeStyle","setLineDash","beginPath","moveTo","x","y","lineTo","stroke","closePath","restore","point","name","fillText","arc","handle","lineWidth","path","bounds","strokeRect","center","prev","prevM","members","pointM","bezierCurveTo","quadraticCurveTo","paused","Space","boundary","margin","Point","Cartesian","Sequence","state","origin","outerRadius","innerRadius","segments","Star","Cog","Rectangle","morpher","currentIndex","nextIndex","steps","current","next","src","create","targ","currentTitle","Morpher","draw","points","i","first","get","bezierLine","showHandles","undefined","drawHandle","showPoints","drawPoint","showPath","drawLine","showBounds","drawBoundingBox","render","appState","factor","animation","updateMe","finished","setTimeout","progress","match","str","model","n","matches","parseInt","isNaN","rgba","RGBA","toString","yiq","$parent","$emit","rgbaString","compute","figure","Bezier","smoothPath","tension","Figures","Path","close","scale","dim","outer","inner","star","flower","outerTension","seaStar","innerTension","translate","Utils","rand","Group","defaults","$on","edit","init","update","params","$route","timeout","clearTimeout","$router","fig","Polygon","radius","hasTranslate","tanslate","reduce","a","b","hasScale","rotate2D","radians","show","index","Routes","figures","initForms","form","segmentsRange","floor","radiusRange","polygon","widthRange","heightRange","outerRadiusRange","innerRadiusRange","phi","maxR","minR","r","p","Polar","type","Line","continuous","reverse","available","indexOf","Error","targFigure","srcFigure","routes","Home","BezierPath","filter","item","meta","menu","map","byName","value","sidebar","getElementById","$el","querySelector","appendChild","body","clientWidth","clientHeight","route","right","style","getComputedStyle","getPropertyValue","router","VueRouter","Vue","$mount"],"mappings":"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"}