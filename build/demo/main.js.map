{"version":3,"file":null,"sources":["../../src/demo/Animation.js","../../src/demo/Canvas2d.js","../../src/demo/Utils.js","../../src/demo/components/Path.vue","../../src/demo/components/Polygon.vue","../../src/demo/components/Rectangle.vue","../../src/demo/components/Star.vue","../../src/demo/App.vue","../../src/demo/main.js"],"sourcesContent":["const Animation = function () {\n    this.id = null;\n    this.count = 0;\n    this.running = false;\n    this.interval = -1;\n    this.last = new Date().getTime();\n    this.callbacks = [];\n};\n\n// register callback\nAnimation.prototype.fps = function (fps) {\n    this.interval = (fps < 0) ? -1 : 1000 / fps;\n    return this;\n};\n\n// register callback\nAnimation.prototype.add = function (callback) {\n    this.callbacks.push(callback);\n    return this;\n};\n\n// clear all callbacks\nAnimation.prototype.clear = function () {\n    this.callbacks.splice(0, this.callbacks.length);\n    return this;\n};\n\n// clear all callbacks\nAnimation.prototype.only = function (callback) {\n    this.clear().add(callback);\n    return this;\n};\n\nAnimation.prototype.play = function () {\n    this.running = true;\n\n    const callback = () => {\n        if (!this.running) {\n            return;\n        }\n\n        const now = new Date().getTime();\n        const delta = now - this.last;\n\n        if (this.interval < 0 || delta > this.interval) {\n            this.last = now - (delta % this.interval);\n            this.callbacks.forEach((fn) => {\n                this.count += 1;\n                fn();\n            });\n        }\n\n        this.id = window.requestAnimationFrame(callback);\n    };\n\n    this.id = window.requestAnimationFrame(callback);\n    return this;\n};\n\nAnimation.prototype.stop = function () {\n    this.running = false;\n    this.count = 0;\n    return this;\n};\n\nAnimation.prototype.pause = function () {\n    this.running = false;\n    return this;\n};\n\nAnimation.prototype.reset = function () {\n    this.running = false;\n    return this;\n};\n\nAnimation.prototype.toggle = function () {\n    if (this.running) {\n        this.pause();\n    } else {\n        this.play();\n    }\n    return this;\n};\n\nexport default Animation;\n","const document = window.document;\nconst CLASS_NAME = 'canvas';\n\nconst Canvas2d = function () {\n    const canvas = document.createElement('canvas');\n    canvas.className = CLASS_NAME;\n    const ctx = canvas.getContext('2d');\n\n    this.canvas = canvas;\n    this.ctx = ctx;\n};\n\nCanvas2d.prototype.clear = function () {\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n};\n\nexport default Canvas2d;\n","export default {\n    /**\n    * Returns a random integer between min (inclusive) and max (inclusive)\n    * Using Math.round() will give you a non-uniform distribution!\n    */\n    randInt: function (min, max) {\n        min = min || -1;\n        max = max || 1;\n        // eslint-disable-next-line no-mixed-operators\n        return Math.random() * (max - min) + min;\n    },\n\n    /**\n    * Returns a random integer between min (inclusive) and max (inclusive)\n    * Using Math.round() will give you a non-uniform distribution!\n    */\n    bounds: function (val, min, max) {\n        val = (min !== false && val < min) ? min : val;\n        val = (max !== false && val > max) ? max : val;\n        return val;\n    },\n\n    /**\n    * Returns a random integer between min (inclusive) and max (inclusive)\n    * Using Math.round() will give you a non-uniform distribution!\n    */\n    randIntRange: function (base, range, bounce = []) {\n        if (bounce.length) {\n            if ((base + range[1]) > bounce[1]) {\n                base -= range[1];\n            }\n            if ((base + range[0]) < bounce[0]) {\n                base -= range[0];\n            }\n        }\n\n        return base + this.randInt(range[0], range[1]);\n    }\n};\n","<template>\n    <div>\n        <form class=\"mui-form\">\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segments\" min=\"10\" max=\"800\" step=\"10\">\n                <label>Segments <small>({{ state.segments }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <pre>{{state}}</pre>\n        </form>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\n\nconst Space = window.Space;\n\nconst state = {\n    prev: null,\n    segments: 100,\n    segmentsRange: 10\n};\n\nconst compute = function(state, canvas) {\n    if (!state.prev) {\n        state.prev = new Space.Point.Cartesian(canvas.width/2, canvas.height/2);\n    }\n    const path = new Space.Path(state.prev.x, state.prev.y);\n    const range = state.segmentsRange;\n    let count = 0;\n    let rand;\n\n    while(count < state.segments){\n        const segX = Utils.randInt(-range, range) * Utils.randInt();\n        const segY = Utils.randInt(-range, range) * Utils.randInt();\n        let x = path.last().x + segX;\n        let y = path.last().y + segY;\n        x = Utils.bounds(x, 0, canvas.width);\n        y = Utils.bounds(y, 0, canvas.height);\n        path.add(x, y);\n        count++;\n    }\n\n    state.prev = path.last();\n    return path;\n};\n\nexport default {\n    name: 'Path',\n    props: [\n        'animation',\n        'states',\n        'canvas'\n    ],\n    mounted() {\n        let path;\n        this.canvas.clear();\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            path = compute(this.state, this.canvas.canvas);\n\n            // draw\n            this.canvas.clear();\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(path.first().x, path.first().y);\n\n            path.points.forEach((point, index)=> {\n                if(index === 0){\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n                this.canvas.ctx.strokeStyle = this.states.canvas.strokeStyle;\n                this.canvas.ctx.lineWidth = this.states.canvas.lineWidth;\n                this.canvas.ctx.stroke();\n            });\n            this.canvas.ctx.closePath();\n        })\n        .play()\n        ;\n    },\n    components: {\n    },\n    data() {\n        return {\n            state\n        };\n    }\n};\n\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <form class=\"mui-form\">\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.radiusRange\" min=\"5\" max=\"500\">\n                <label>Radius Range <small>({{ state.radiusRange }})</small></label>\n            </div>\n            <pre>{{state}}</pre>\n        </form>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\n\nconst Space = window.Space;\n\nconst state = {\n    prev: {\n        segments: 3,\n        radius: 50\n    },\n    segmentsRange: 10,\n    radiusRange: 200,\n    origin: null\n};\n\nconst compute = function(state, canvas) {\n    if(!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width/2, canvas.height/2);\n    }\n    let radius = Math.floor(Utils.randInt(5, state.radiusRange));\n    let segments = Math.floor(Utils.randInt(3, state.segmentsRange));\n    segments = Utils.bounds(segments, false, 25);\n    radius = Utils.bounds(radius, false, canvas.width/2);\n\n    state.prev.segments = segments;\n    state.prev.radius = radius;\n\n    return new Space.Polygon(segments, radius, state.origin);\n};\n\nexport default {\n    name: 'Polygon',\n    props: [\n        'animation',\n        'states',\n        'canvas'\n    ],\n    mounted() {\n        let polygon;\n        this.canvas.clear();\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // draw\n            this.canvas.clear();\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n\n            polygon.path.points.forEach((point, index)=> {\n                if(index === 0){\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n                this.canvas.ctx.strokeStyle = this.states.canvas.strokeStyle;\n                this.canvas.ctx.lineWidth = this.states.canvas.lineWidth;\n                this.canvas.ctx.stroke();\n            });\n            this.canvas.ctx.closePath();\n        })\n        .play()\n        ;\n    },\n    components: {\n    },\n    data() {\n        return {\n            state\n        };\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <form class=\"mui-form\">\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.widthRange\" min=\"5\" max=\"1000\">\n                <label>Width Range <small>({{ state.widthRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.heightRange\" min=\"5\" max=\"1000\">\n                <label>Height Range <small>({{ state.heightRange }})</small></label>\n            </div>\n            <pre>{{state}}</pre>\n        </form>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\n\nconst Space = window.Space;\n\nconst state = {\n    prev: {\n        width: 25,\n        height: 50\n    },\n    widthRange: 500,\n    heightRange: 500,\n    origin: null\n};\n\nconst compute = function(state, canvas) {\n    if(!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width/2, canvas.height/2);\n    }\n    let width = Math.floor(Utils.randInt(5, state.widthRange));\n    let height = Math.floor(Utils.randInt(3, state.heightRange));\n\n    state.prev.width = width;\n    state.prev.height = height;\n\n    return new Space.Rectangle(width, height, state.origin);\n};\n\nexport default {\n    name: 'Rectangle',\n    props: [\n        'animation',\n        'states',\n        'canvas'\n    ],\n    mounted() {\n        let polygon;\n        this.canvas.clear();\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // draw\n            this.canvas.clear();\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n\n            polygon.path.points.forEach((point, index)=> {\n                if(index === 0){\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n                this.canvas.ctx.strokeStyle = this.states.canvas.strokeStyle;\n                this.canvas.ctx.lineWidth = this.states.canvas.lineWidth;\n                this.canvas.ctx.stroke();\n            });\n            this.canvas.ctx.closePath();\n        })\n        .play()\n        ;\n    },\n    components: {\n    },\n    data() {\n        return {\n            state\n        };\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <form class=\"mui-form\">\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.segmentsRange\" min=\"1\" max=\"50\">\n                <label>Segment Range <small>({{ state.segmentsRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.outerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Outer Radius Range <small>({{ state.outerRadiusRange }})</small></label>\n            </div>\n            <div class=\"mui-textfield\">\n                <input type=\"range\" v-model.number=\"state.innerRadiusRange\" min=\"5\" max=\"500\">\n                <label>Inner Radius Range <small>({{ state.innerRadiusRange }})</small></label>\n            </div>\n            <pre>{{state}}</pre>\n        </form>\n    </div>\n</template>\n\n<script>\nimport Utils from '../Utils';\n\nconst Space = window.Space;\n// segments, outerRadius, innerRadius, center\nconst state = {\n    prev: {\n        segments: 3,\n        outerRadius: 50,\n        innerRadius: 10\n    },\n    segmentsRange: 10,\n    outerRadiusRange: 200,\n    innerRadiusRange: 200,\n    origin: null\n};\n\nconst compute = function(state, canvas) {\n    if(!state.origin) {\n        state.origin = new Space.Point.Cartesian(canvas.width/2, canvas.height/2);\n    }\n    let outerRadius = Math.floor(Utils.randInt(5, state.outerRadiusRange));\n    let innerRadius = Math.floor(Utils.randInt(5, state.innerRadiusRange));\n    let segments = Math.floor(Utils.randInt(3, state.segmentsRange));\n    segments = Utils.bounds(segments, false, 25);\n    outerRadius = Utils.bounds(outerRadius, false, canvas.width/2);\n    innerRadius = Utils.bounds(innerRadius, false, canvas.width/2);\n\n    state.prev.segments = segments;\n    state.prev.outerRadius = outerRadius;\n    state.prev.innerRadius = innerRadius;\n\n    return new Space.Star(segments, outerRadius, innerRadius, state.origin);\n};\n\nexport default {\n    name: 'Star',\n    props: [\n        'animation',\n        'states',\n        'canvas'\n    ],\n    mounted() {\n        let polygon;\n        this.canvas.clear();\n\n        this.animation\n        // .fps(1)\n        .only(() => {\n            // compute path\n            polygon = compute(this.state, this.canvas.canvas);\n\n            // draw\n            this.canvas.clear();\n            this.canvas.ctx.beginPath();\n            this.canvas.ctx.moveTo(polygon.path.first().x, polygon.path.first().y);\n\n            polygon.path.points.forEach((point, index)=> {\n                if(index === 0){\n                    return;\n                }\n                this.canvas.ctx.lineTo(point.x, point.y);\n                this.canvas.ctx.strokeStyle = this.states.canvas.strokeStyle;\n                this.canvas.ctx.lineWidth = this.states.canvas.lineWidth;\n                this.canvas.ctx.stroke();\n            });\n            this.canvas.ctx.closePath();\n        })\n        .play()\n        ;\n    },\n    components: {\n    },\n    data() {\n        return {\n            state\n        };\n    }\n};\n</script>\n\n<style>\n</style>\n","<template>\n    <div>\n        <header id=\"header\">\n            <div class=\"mui-appbar mui--appbar-line-height mui--z1\">\n                <div class=\"mui-container-fluid\">\n                    <table width=\"100%\">\n                        <tr class=\"mui--appbar-height\">\n                            <td>\n                                <span class=\"app--brand mui--text-title\">SpaceLib Demo</span>\n                                <router-link to=\"/Path\" class=\"mui-btn mui-btn--raised\">Path</router-link>\n                                <router-link to=\"/Polygon\" class=\"mui-btn mui-btn--raised\">Polygon</router-link>\n                                <router-link to=\"/Rectangle\" class=\"mui-btn mui-btn--raised\">Rectangle</router-link>\n                                <router-link to=\"/Star\" class=\"mui-btn mui-btn--raised\">Star</router-link>\n                            </td>\n                            <td class=\"mui--text-title\">\n                                <a class=\"app--sidebar-trigger mui--pull-right\" v-on:click=\"sidebar = !sidebar\"><i class=\"material-icons mui--text-display1\">settings</i></a>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n        </header>\n\n        <footer id=\"footer\">\n            <div class=\"app--footer-content mui-container-fluid mui--align-middle\">\n                Demo made with <a href=\"https://vuejs.org/\">Vue</a> & <a href=\"https://www.muicss.com\">MUICSS</a>\n            </div>\n        </footer>\n\n        <aside id=\"sidebar\" class=\"mui-panel\" v-bind:class=\"{'visible': sidebar}\">\n\n            <div class=\"mui--appbar-line-height\">\n                <span class=\"mui--text-title\">Params</span>\n            </div>\n            <div class=\"mui-divider\"></div>\n\n            <form class=\"mui-form\">\n               <div class=\"mui-textfield\">\n                   <pre>count {{animation.count}}</pre>\n               </div>\n               <div class=\"mui-textfield\">\n                   <button v-on:click=\"animation.toggle()\" class=\"mui-btn mui-btn--small mui-btn--primary\">{{ (animation.running) ? 'Pause' : 'Run' }}</button>\n               </div>\n               <div class=\"mui-checkbox\">\n                   <label><input type=\"checkbox\" v-on:click=\"throttle(animation.interval < 0 ? 3 : -1)\"> Throttle animation</label>\n               </div>\n               <div class=\"mui-panel\" v-if=\"animation.interval > 1\">\n                   <div class=\"mui-textfield\" style=\"\">\n                       <input type=\"range\" v-on:change=\"throttle($event.target.value)\" min=\"0\" max=\"100\">\n                       <label>fps <small>({{ 1000 / animation.interval }})</small></label>\n                   </div>\n               </div>\n           </form>\n\n           <router-view class=\"view\"\n               :states=\"states\"\n               :animation=\"animation\"\n               :canvas=\"canvas\"\n           ></router-view>\n\n       </aside>\n\n        <main id=\"content\" class=\"mui-container-fluid\">\n            <div class=\"mui-row\">\n                <div class=\"mui-col-md-12 app--canvas\"></div>\n            </div>\n        </main>\n    </div>\n</template>\n\n<script>\nimport Path from './components/Path.vue';\n\nexport default {\n    name: 'app',\n    props: ['animation', 'states', 'canvas'],\n    components: {\n        Path\n    },\n    mounted() {\n        this.$el.querySelector('.app--canvas').appendChild(this.canvas.canvas);\n        this.canvas.canvas.width = document.body.clientWidth;\n        this.canvas.canvas.height = document.body.clientHeight;\n        this.canvas.ctx.fillStyle = this.states.canvas.fillStyle;\n        this.canvas.ctx.lineWidth = this.states.canvas.lineWidth;\n    },\n    methods: {\n        throttle: function (value) {\n            if(value === null){\n                return;\n            }\n            value = parseInt(value, 10);\n            console.log(value);\n            if(!isNaN(value)){\n                this.animation.fps(value);\n            }\n        }\n    },\n    data() {\n        return {\n            sidebar: true\n        }\n    }\n};\n</script>\n\n<style>\nbody{\n    background-color: black;\n}\n</style>\n","import Vue from 'vue';\nimport VueRouter from 'vue-router';\n// import Space from '../Space';\n\n// rollup-plugin-scss\nimport './main.scss';\n\nimport Animation from './Animation';\nimport Canvas2d from './Canvas2d';\n\nimport Path from './components/Path.vue';\nimport Polygon from './components/Polygon.vue';\nimport Rectangle from './components/Rectangle.vue';\nimport Star from './components/Star.vue';\nimport App from './App.vue';\n\nconst animation = new Animation();\nconst canvas = new Canvas2d();\n\nconst states = {\n    canvas: {\n        width: 500,\n        height: 500,\n        strokeStyle: 'hsla(300, 100%, 75%, 1)',\n        fillStyle: 'rgba(0, 0, 0, .08)',\n        lineWidth: 0.1\n    }\n};\n\n// Create the router\nconst router = new VueRouter({\n    mode: 'hash', //'history',\n    routes: [\n        {\n            path: '/',\n            component: Path\n        },\n        {\n            path: '/Path',\n            component: Path\n        },\n        {\n            path: '/Polygon',\n            component: Polygon\n        },\n        {\n            path: '/Rectangle',\n            component: Rectangle\n        },\n        {\n            path: '/Star',\n            component: Star\n        },\n        // catch all redirect\n        {\n            path: '*',\n            redirect: '/'\n        }\n    ]\n});\n\n// 4. Create and mount root instance.\n// Make sure to inject the router.\nnew Vue({\n    router,\n    data: {\n        animation,\n        states,\n        canvas\n    },\n    components: {\n        App\n    },\n    //render: h => h(App)\n    template: '<App :states=\"states\" :animation=\"animation\" :canvas=\"canvas\" />',\n}).$mount('#app');\n"],"names":["Animation","id","count","running","interval","last","Date","getTime","callbacks","prototype","fps","add","callback","push","clear","splice","length","only","play","now","delta","forEach","fn","window","requestAnimationFrame","stop","pause","reset","toggle","document","CLASS_NAME","Canvas2d","canvas","createElement","className","ctx","getContext","fillRect","width","height","min","max","Math","random","val","base","range","bounce","randInt","Space","state","compute","prev","Point","Cartesian","path","Path","x","y","segmentsRange","rand","segments","segX","Utils","segY","bounds","render","animation","beginPath","moveTo","first","points","point","index","lineTo","strokeStyle","states","lineWidth","stroke","closePath","origin","radius","floor","radiusRange","Polygon","polygon","widthRange","heightRange","Rectangle","outerRadius","outerRadiusRange","innerRadius","innerRadiusRange","Star","$el","querySelector","appendChild","body","clientWidth","clientHeight","fillStyle","value","parseInt","log","isNaN","router","VueRouter","Vue","$mount"],"mappings":"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"}