{"version":3,"file":null,"sources":["../src/Point.js","../src/World.js","../src/Path.js","../src/BezierPath.js","../src/Polygon.js","../src/Space.js"],"sourcesContent":["const Point = {};\n\n////\n// Point.Cartesian\n////\n\nPoint.Cartesian = function (x, y, z) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.z = z || 0;\n};\n\n// Convert to Spherical\n\nPoint.Cartesian.prototype.r = function () {\n    // eslint-disable-next-line no-restricted-properties\n    return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2) + Math.pow(this.z, 2));\n};\n\nPoint.Cartesian.prototype.phi = function () {\n    return Math.atan2(this.y, this.x);\n};\n\nPoint.Cartesian.prototype.theta = function () {\n    return Math.acos(this.z / this.r());\n};\n\n//@TODO test\nPoint.Cartesian.prototype.toPolar = function () {\n    return new Point.Polar(this.r(), this.phi());\n};\n\nPoint.Cartesian.prototype.toSpherical = function () {\n    return new Point.Spherical(this.r(), this.phi(), this.theta());\n};\n\n// Geographical\n// https://vvvv.org/blog/polar-spherical-and-geographic-coordinates\n\nPoint.Cartesian.prototype.lat = function () {\n    return this.phi() - (Math.PI / 2);\n};\n\nPoint.Cartesian.prototype.lng = function () {\n    return this.theta();\n};\n\n// Ops\n\nPoint.Cartesian.prototype.clone = function () {\n    return new Point.Cartesian(this.x, this.y, this.z);\n};\n\nPoint.Cartesian.prototype.multiply = function (p) {\n    this.x *= p.x;\n    this.y *= p.y;\n    this.z *= p.z;\n};\n\n//@TODO test\nPoint.Cartesian.prototype.scale = function (origin, p) {\n    this.substract(origin);\n    this.multiply(p);\n    this.add(origin);\n};\n\nPoint.Cartesian.prototype.rotate2D = function (origin, phi) {\n    this.substract(origin);\n    let p = this.toPolar();\n    p.phi += phi;\n    p = p.toCartesian();\n    this.x = p.x;\n    this.y = p.y;\n    this.add(origin);\n};\n\nPoint.Cartesian.prototype.translate = function (x, y, z) {\n    x = x || 0;\n    y = y || 0;\n    z = z || 0;\n    this.x += x;\n    this.y += y;\n    this.z += z;\n};\n\nPoint.Cartesian.prototype.add = function (p) {\n    this.x += p.x;\n    this.y += p.y;\n    this.z += p.z;\n};\n\nPoint.Cartesian.prototype.substract = function (p) {\n    this.x -= p.x;\n    this.y -= p.y;\n    this.z -= p.z;\n};\n\nPoint.Cartesian.prototype.equals = function (p) {\n    return ((this.x === p.x) && (this.y === p.y) && (this.z === p.z));\n};\n\nPoint.Cartesian.prototype.toArray = function () {\n    return [this.x, this.y, this.z];\n};\n\n// static methods\nPoint.Cartesian.create = function (x, y, z) {\n    if (typeof x === 'object' && typeof x.clone === 'function') {\n        return x;\n    }\n    return new Point.Cartesian(x, y, z);\n};\n\n////\n// Point.Polar\n////\n\nPoint.Polar = function (r, phi) {\n    this.r = r || 0;            // distance\n    this.phi = phi || 0;        // polar angle\n};\n\n//// Point.Polar conversions\n\n// Cartesian\n\nPoint.Polar.prototype.x = function () {\n    return this.r * Math.cos(this.phi);\n};\n\nPoint.Polar.prototype.y = function () {\n    return this.r * Math.sin(this.phi);\n};\n\nPoint.Polar.prototype.toCartesian = function () {\n    return new Point.Cartesian(this.x(), this.y());\n};\n\n\n////\n// Point.Spherical\n////\n\nPoint.Spherical = function (r, phi, theta) {\n    this.r = r || 0;            // distance\n    this.phi = phi || 0;        // polar angle\n    this.theta = theta || 0;    // azimuthal angle\n};\n\n//// Point.Spherical conversions\n\n// Cartesian\n\nPoint.Spherical.prototype.x = function () {\n    return this.r * Math.sin(this.theta) * Math.cos(this.phi);\n};\n\nPoint.Spherical.prototype.y = function () {\n    return this.r * Math.sin(this.theta) * Math.sin(this.phi);\n};\n\nPoint.Spherical.prototype.z = function () {\n    return this.r * Math.cos(this.theta);\n};\n\nPoint.Spherical.prototype.toCartesian = function () {\n    return new Point.Cartesian(this.x(), this.y(), this.z());\n};\n\n// Geographical\n// https://vvvv.org/blog/polar-spherical-and-geographic-coordinates\n\nPoint.Spherical.prototype.lat = function () {\n    return this.phi - (Math.PI / 2);\n};\n\nPoint.Spherical.prototype.lng = function () {\n    return this.theta;\n};\n\nexport default Point;\n","const World = function (origin) {\n    origin = origin || null;\n\n    if (!origin || typeof origin.clone !== 'function') {\n        throw Error('World constructor requires a Space.Point.Cartesian instance');\n    }\n\n    this.origin = function () {\n        return origin.clone();\n    };\n\n    this.locate = function (point) {\n        point.add(origin);\n        return point;\n    };\n};\n\nexport default World;\n","//https://github.com/d3/d3-path/blob/master/src/path.js\nimport Point from './Point';\nimport World from './World';\n\nconst Path = function (x, y, z) {\n    const origin = Point.Cartesian.create(x, y, z);\n    World.call(this, origin);\n\n    this.points = [];\n};\n\nPath.prototype = Object.create(World.prototype);\nPath.prototype.constructor = Path;\n\n// push to points, consider closed\nPath.prototype.addPoint = function (v) {\n    if (this.isClosed()) {\n        this.points.splice(this.points.length - 1, 0, v);\n    } else {\n        this.points.push(v);\n    }\n};\n\n// add coords relative to origin\nPath.prototype.add = function (x, y, z) {\n    const v = this.locate(Point.Cartesian.create(x, y, z));\n    this.addPoint(v);\n};\n\n// relatve coords from last point\nPath.prototype.progress = function (x, y, z) {\n    if (!this.points.length) {\n        throw new Error('Path error: cannot progress on an empty path');\n    }\n    const v = Point.Cartesian.create(x, y, z);\n    v.add(this.last());\n    this.addPoint(v);\n};\n\nPath.prototype.last = function () {\n    return (this.points.length) ? this.points[this.points.length - 1] : null;\n};\n\nPath.prototype.first = function () {\n    return (this.points.length) ? this.points[0] : null;\n};\n\nPath.prototype.open = function () {\n    if (this.isClosed()) {\n        this.points.splice(-1, 1);\n    }\n    return this.last();\n};\n\nPath.prototype.close = function () {\n    if (this.points.length && !this.isClosed()) {\n        this.points.push(this.first());\n    }\n    return this.last();\n};\n\nPath.prototype.isClosed = function () {\n    return (this.points.length > 1 && this.last() === this.first());\n};\n\n// could be bundled to .transform('translate' x,y,z) ?\n\nPath.prototype.translate = function (x, y, z) {\n    let i;\n    const v = Point.Cartesian.create(x, y, z);\n    const length = (this.isClosed()) ? this.points.length - 1 : this.points.length;\n    for (i = 0; i < length; i += 1) {\n        this.points[i].add(v);\n    }\n};\n\nPath.prototype.scale = function (x, y, z) {\n    let i;\n    const v = Point.Cartesian.create(x, y, z);\n    const length = (this.isClosed()) ? this.points.length - 1 : this.points.length;\n    for (i = 0; i < length; i += 1) {\n        this.points[i].scale(this.origin(), v);\n    }\n};\n\nPath.prototype.rotate2D = function (rad) {\n    let i;\n    const length = (this.isClosed()) ? this.points.length - 1 : this.points.length;\n    for (i = 0; i < length; i += 1) {\n        this.points[i].rotate2D(this.origin(), rad);\n    }\n};\n\nexport default Path;\n","import World from './World';\n\nconst BezierPath = function (origin) {\n    World.call(this, origin);\n\n    this.points = [];\n};\n\nBezierPath.prototype = Object.create(World.prototype);\nBezierPath.prototype.constructor = BezierPath;\n\n// push to points, consider closed\nBezierPath.prototype.addPoint = function (v) {\n    if (this.isClosed()) {\n        this.points.splice(this.points.length - 1, 0, v);\n    } else {\n        this.points.push(v);\n    }\n};\n\nBezierPath.prototype.add = function (point, cp1, cp2) {\n    cp1 = cp1 || null;\n    cp2 = cp2 || null;\n    point = this.locate(point);\n    this.addPoint({\n        point: point,\n        cp1: (cp1) ? this.locate(cp1) : point.clone(),\n        cp2: (cp2) ? this.locate(cp2) : point.clone()\n    });\n};\n\n// relatve coords from last point\nBezierPath.prototype.progress = function (point, cp1, cp2) {\n    if (!this.points.length) {\n        throw new Error('Path error: cannot progress on an empty path');\n    }\n    cp1 = cp1 || null;\n    cp2 = cp2 || null;\n    const last = this.last();\n    point = point.add(last.point);\n    this.addPoint({\n        point: point,\n        cp1: (cp1) ? this.locate(cp1) : point.clone(),\n        cp2: (cp2) ? this.locate(cp2) : point.clone()\n    });\n};\n\nBezierPath.prototype.last = function () {\n    return (this.points.length) ? this.points[this.points.length - 1] : null;\n};\n\nBezierPath.prototype.first = function () {\n    return (this.points.length) ? this.points[0] : null;\n};\n\nBezierPath.prototype.open = function () {\n    if (this.isClosed()) {\n        this.points.splice(-1, 1);\n    }\n    return this.last();\n};\n\nBezierPath.prototype.close = function () {\n    if (this.points.length && !this.isClosed()) {\n        this.points.push(this.first());\n    }\n    return this.last();\n};\n\nBezierPath.prototype.isClosed = function () {\n    return (this.points.length > 1 && this.last() === this.first());\n};\n\nexport default BezierPath;\n","import Path from './Path';\nimport Point from './Point';\n\n////\n// Polygon\n////\n\n/**\n * x translate\n * rotate\n * scale\n */\n\nconst Polygon = function (segments, radius, origin) {\n    const path = new Path(origin);\n    let i = 0;\n\n    //@see http://stackoverflow.com/a/7198179\n    const delta = (Math.PI * 2) / segments;\n\n    while (i < segments) {\n        const p = new Point.Polar(radius, i * delta);\n        const c = p.toCartesian();\n        path.add(c.x, c.y);\n        i += 1;\n    }\n    path.close();\n    this.path = path;\n};\n\n////\n// Rectangle\n////\n\nconst Rectangle = function (width, height, origin) {\n    const path = new Path(origin);\n\n    path.add(-width / 2, height / 2);\n    path.progress(width, 0);\n    path.progress(0, -height);\n    path.progress(-width, 0);\n    path.close();\n\n    this.path = path;\n};\n\n////\n// Star\n////\n\nconst Star = function (segments, outerRadius, innerRadius, origin) {\n    const path = new Path(origin);\n\n    const _point = function (radius, delta) {\n        let point = new Point.Polar(radius, delta);\n        point = point.toCartesian();\n        return point;\n    };\n\n    //@see http://stackoverflow.com/a/7198179\n    const rad0 = Math.PI / 2;\n    const delta = (Math.PI * 2) / segments;\n    let _delta;\n    let inner;\n    let outer;\n    let i = 0;\n\n    while (i < segments) {\n        _delta = (i * (delta)) - rad0;\n        outer = _point(outerRadius, _delta);\n        path.add(outer.x, outer.y);\n\n        if (i <= segments - 1) {\n            _delta += delta / 2;\n            inner = _point(innerRadius, _delta);\n            path.add(inner.x, inner.y);\n        }\n        i += 1;\n    }\n    path.close();\n    this.path = path;\n};\n\nexport {\n    Polygon,\n    Rectangle,\n    Star\n};\n","import Point from './Point';\nimport Path from './Path';\nimport BezierPath from './BezierPath';\nimport * as Polygons from './Polygon';\n\nconst Module = {\n    Point,\n    Path,\n    BezierPath\n};\n\n// hm...\nObject.keys(Polygons).forEach((key) => {\n    Module[key] = Polygons[key];\n});\n\nexport default Module;\n"],"names":["Point","Cartesian","x","y","z","prototype","r","Math","sqrt","pow","phi","atan2","theta","acos","toPolar","Polar","toSpherical","Spherical","lat","PI","lng","clone","multiply","p","scale","origin","substract","add","rotate2D","toCartesian","translate","equals","toArray","create","cos","sin","World","Error","locate","point","Path","call","points","Object","constructor","addPoint","v","isClosed","splice","length","push","progress","last","first","open","close","i","rad","BezierPath","cp1","cp2","Polygon","segments","radius","path","delta","c","Rectangle","width","height","Star","outerRadius","innerRadius","_point","rad0","_delta","inner","outer","Module","keys","Polygons","forEach","key"],"mappings":"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"}